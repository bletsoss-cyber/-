import React, { useState, useEffect } from 'react';
import { ChevronLeft, ChevronRight, RotateCw, Shuffle, Layers } from 'lucide-react';

const flashcardsData = [
  // --- ΠΟΛΥΜΕΡΙΣΜΟΣ ---
  {
    id: 1,
    category: 'Πολυμερισμός',
    question: 'Ποιοι είναι οι 2 τρόποι πολυμερισμού;',
    answer: (
      <div className="text-left">
        <ol className="list-decimal pl-5 space-y-2">
          <li><strong>Προσθήκη:</strong> Όχι εξάλειψη μικρότερου μορίου.</li>
          <li><strong>Συμπύκνωση:</strong> Εξάλειψη μικρότερου μορίου (π.χ. H₂O).</li>
        </ol>
      </div>
    )
  },
  {
    id: 2,
    category: 'Πολυμερισμός Προσθήκης',
    question: 'Ποια είναι τα ΣΤΑΔΙΑ του Πολυμερισμού Προσθήκης;',
    answer: (
      <div className="text-left">
        <ul className="space-y-2">
          <li>1. <strong>Ενεργοποίηση</strong> (απαιτεί την παρουσία ελευθέρων ριζών)</li>
          <li>2. <strong>Έναρξη</strong></li>
          <li>3. <strong>Πρόοδος της αντίδρασης</strong> (ανάπτυξη της αλυσίδας)</li>
          <li>4. <strong>Τερματισμός</strong></li>
        </ul>
      </div>
    )
  },
  {
    id: 3,
    category: 'Πολυμερισμός Προσθήκης',
    question: 'Ποιος είναι ο ενεργοποιητής στην Οδοντιατρική και πώς λειτουργεί;',
    answer: (
      <div className="text-left">
        <p className="mb-2"><strong>Υπεροξείδιο Βενζοιλίου</strong> (δίνει ελεύθερες ρίζες).</p>
        <p>↳ Διασπάται με χρήση ενεργοποιητή (Θερμότητα &gt; 65°C).</p>
      </div>
    )
  },
  {
    id: 4,
    category: 'Ιδιότητες Πολυμερών',
    question: 'Πώς επηρεάζει η αύξηση του Μοριακού Βάρους (↑Mr) τις ιδιότητες;',
    answer: (
      <div className="text-left">
        <p className="mb-2">Η <strong>↑ Mr</strong> επηρεάζει (βελτιώνει) τις φυσικές ιδιότητες.</p>
        <p>↳ <strong>↑ ιξώδους τήξης</strong> → <strong>↑ θ υαλώδους μετάπτωσης</strong>.</p>
        <p className="text-sm text-gray-600 mt-2">(Αποτέλεσμα: Δύσκολη επεξεργασία).</p>
      </div>
    )
  },
  {
    id: 5,
    category: 'Ιδιότητες Πολυμερών',
    question: 'Πώς επηρεάζει η Θερμοκρασία (Θ) τους δεσμούς στα πολυμερή;',
    answer: (
      <div className="text-left">
        <ul className="space-y-2">
          <li><strong>Θ↑ (Αύξηση):</strong> Σπάνε οι δεσμοί.</li>
          <li><strong>Θ↓ (Μείωση):</strong> Επαναδημιουργούνται.</li>
        </ul>
        <p className="mt-2 text-sm italic">Σημείωση: Η κρυσταλλική δομή είναι περιορισμένη στα πολυμερή.</p>
      </div>
    )
  },
  
  // --- SOS / ΠΛΑΣΤΙΚΟΠΟΙΗΤΕΣ ---
  {
    id: 6,
    category: 'SOS - Πλαστικοποιητές',
    question: 'Τι είναι οι Πλαστικοποιητές;',
    answer: 'Είναι ουσία με μικρό Mr (Μοριακό Βάρος) που προστίθεται σε πολυμερές.'
  },
  {
    id: 7,
    category: 'SOS - Πλαστικοποιητές',
    question: 'Ποια είναι η επίδραση των Πλαστικοποιητών;',
    answer: (
      <div className="text-left">
        <div className="border-l-4 border-blue-400 pl-3 my-2">
          <p>↓ θ υαλώδους μετάπτωσης</p>
          <p>↓ μέτρο ελαστικότητας</p>
        </div>
        <p className="font-bold">Αποτέλεσμα: Πιο εύκαμπτες οι αλυσίδες.</p>
      </div>
    )
  },
  {
    id: 8,
    category: 'SOS - Πλαστικοποιητές',
    question: 'Ποιος πλαστικοποιητής χρησιμοποιείται στην Οδοντιατρική και πού;',
    answer: (
      <div className="text-left">
        <p><strong>Διβουτυλική φθαλείνη</strong></p>
        <p className="mt-1">→ Χρήση: Μαλακά επιστρώματα οδοντοστοιχιών.</p>
        <p className="mt-2 text-red-600 text-sm">↳ Ελαττωμένη χρήση στα αποτυπωτικά υλικά και στις σύνθετες ρητίνες.</p>
      </div>
    )
  },

  // --- ΦΥΣΙΚΕΣ ΙΔΙΟΤΗΤΕΣ 1.7 - ΡΕΟΛΟΓΙΑ ---
  {
    id: 9,
    category: 'Φυσικές Ιδιότητες - Ρεολογία',
    question: 'Τι είναι Ρεολογία και πώς διακρίνεται η Ροή;',
    answer: (
      <div className="text-left">
        <p className="mb-2"><strong>Ρεολογία:</strong> Μελέτη της ροής των υλικών.</p>
        <p className="font-semibold underline">Ροή:</p>
        <ul className="list-disc pl-5">
          <li><strong>Υγρά</strong> ↗ Ιξώδες</li>
          <li><strong>Στερεά</strong> ↗ Ερπυσμός</li>
          <li>↘ Ιξωδοελαστικότητα</li>
        </ul>
      </div>
    )
  },
  {
    id: 10,
    category: 'Ρεολογία',
    question: 'Τι είναι Ιξώδες και πώς επηρεάζεται από τη Θερμοκρασία;',
    answer: (
      <div className="text-left">
        <p><strong>Ιξώδες:</strong> Η αντίσταση ενός υγρού στη ροή.</p>
        <div className="mt-3 bg-yellow-100 p-2 rounded text-center border border-yellow-300">
          <strong>Θ↑ : ↓ Ιξώδους</strong>
          <div className="text-xs text-gray-600">(Αύξηση θερμοκρασίας μειώνει το ιξώδες)</div>
        </div>
      </div>
    )
  },
  {
    id: 11,
    category: 'Ρεολογία',
    question: 'Δώσε τους τύπους για Τάση Διάτμησης και Βαθμό Διάτμησης.',
    answer: (
      <div className="text-left space-y-3">
        <div>
          <span className="font-bold">Τάση διάτμησης (σ):</span>
          <div className="text-xl text-center font-mono my-1">σ = F / A</div>
        </div>
        <div>
          <span className="font-bold">Βαθμός διάτμησης (ė):</span>
          <div className="text-xl text-center font-mono my-1">ė = V / d</div>
        </div>
      </div>
    )
  },
  {
    id: 12,
    category: 'Ρεολογία',
    question: 'Τι είναι η Θιξοτροπία;',
    answer: 'Είναι η μεταβολή του ιξώδους για συγκεκριμένο βαθμό διάτμησης.'
  },

  // --- ΘΕΡΜΙΚΕΣ ΙΔΙΟΤΗΤΕΣ ---
  {
    id: 13,
    category: 'Θερμικές Ιδιότητες',
    question: 'Ποιες είναι οι βασικές Θερμικές Ιδιότητες;',
    answer: (
      <div className="text-left">
        <ul className="list-disc pl-5 space-y-1">
          <li>Θερμική αγωγιμότητα</li>
          <li>Ειδική θερμότητα</li>
          <li>Θερμική διάχυση</li>
          <li>Γραμμικός συντελεστής θερμικής διαστολής (α)</li>
        </ul>
      </div>
    )
  },
  {
    id: 14,
    category: 'Θερμικές Ιδιότητες',
    question: 'Ποια είναι η ιδανική συνθήκη για τον συντελεστή θερμικής διαστολής (α);',
    answer: (
      <div className="text-center text-lg font-bold bg-green-50 p-3 rounded border border-green-200">
        α (αποκαταστατικού υλικού) <br/> = <br/> α (οδοντικών ιστών)
      </div>
    )
  },
  {
    id: 15,
    category: 'Θερμικές Ιδιότητες',
    question: 'Ποια είναι η Κλινική Σημασία των θερμικών ιδιοτήτων;',
    answer: (
      <div className="text-left">
        <ol className="list-decimal pl-5 space-y-2">
          <li>Μπορούν να επηρεάσουν την <strong>αίσθηση ζεστού-κρύου</strong>.</li>
          <li>Μπορούν να οδηγήσουν σε <strong>μηχανική αποτυχία</strong> λόγω διαστολής-συστολής.</li>
        </ol>
      </div>
    )
  },

  // --- ΟΠΤΙΚΕΣ ΙΔΙΟΤΗΤΕΣ ---
  {
    id: 16,
    category: 'Οπτικές Ιδιότητες',
    question: 'Από τι εξαρτώνται οι Οπτικές Ιδιότητες;',
    answer: (
      <div className="text-left">
        Χαρακτηριστικά αντικειμένου <br/>
        <span className="text-blue-600 font-bold">→ Φάσμα ηλ/μαγ ακτινοβολίας →</span> <br/>
        Χρώμα, Διαφάνεια, Υφή επιφάνειας.
      </div>
    )
  },
  {
    id: 17,
    category: 'Οπτικές Ιδιότητες',
    question: 'Τι είναι ο Φθορισμός και τι μήκη κύματος περιλαμβάνει;',
    answer: (
      <div className="text-left">
        <p><strong>Φθορισμός:</strong></p>
        <ul className="list-none pl-2 space-y-1 mt-2">
          <li>⬇ Απορρόφηση φωτός στο <strong>υπεριώδες</strong> (300-400 nm)</li>
          <li>⬆ Εκπομπή φωτός στο <strong>ορατό</strong> (400-450 nm)</li>
        </ul>
      </div>
    )
  },
  {
    id: 18,
    category: 'Οπτικές Ιδιότητες',
    question: 'Ποιο είναι το αποτέλεσμα του φωτός φθορισμού και πού είναι αναγκαίο;',
    answer: (
      <div className="text-left">
        <p>→ Δίνει <strong>πιο λευκά δόντια</strong> (αδαμαντίνη).</p>
        <p className="mt-2"><strong>Αναγκαίο στα αποκαταστατικά υλικά:</strong></p>
        <ul className="list-disc pl-5 text-sm text-gray-700">
          <li>Γέφυρες</li>
          <li>Στεφάνες</li>
          <li>Εμφράξεις</li>
        </ul>
      </div>
    )
  },
  {
    id: 19,
    category: 'Οπτικές Ιδιότητες',
    question: 'Πώς διακρίνεται η Διαφάνεια;',
    answer: (
      <div className="text-left">
        <ul className="space-y-2">
          <li>↗ <strong>Διαφανές:</strong> Διέλευση φωτός.</li>
          <li>↘ <strong>Αδιαφανές:</strong> Μη διέλευση φωτός.</li>
        </ul>
      </div>
    )
  },

  // --- ΥΦΗ ΕΠΙΦΑΝΕΙΑΣ ---
  {
    id: 20,
    category: 'Υφή Επιφάνειας',
    question: 'Πώς αλληλεπιδρά το φως με Λείες και Τραχείες επιφάνειες;',
    answer: (
      <div className="text-left">
        <ul className="space-y-3">
          <li><strong>Λείες επιφάνειες:</strong> Ανάκλαση φωτός.</li>
          <li><strong>Τραχείες επιφάνειες:</strong> Σκέδαση φωτός.</li>
        </ul>
        <div className="mt-3 text-sm italic text-gray-600">
          "Όσο μικρότερο → τόσο τραχύτερο"
        </div>
      </div>
    )
  },
  {
    id: 21,
    category: 'Υφή Επιφάνειας',
    question: 'Τι είναι τα Ra και Sa στη μέτρηση τραχύτητας;',
    answer: (
      <div className="text-left">
        <ul className="space-y-3">
          <li>
            <strong>Ra:</strong> Αδρότητα επιφάνειας σε <u>προφιλόμετρο ακίδας</u>.
          </li>
          <li>
            <strong>Sa:</strong> Αδρότητα επιφάνειας σε <u>τρισδιάστατη μορφή</u> (οπτικό προφιλόμετρο).
          </li>
        </ul>
      </div>
    )
  },
  {
    id: 22,
    category: 'Υφή Επιφάνειας',
    question: 'Ποια είναι η κλινική σημασία της υφής επιφάνειας;',
    answer: 'Η επιλογή ενός υλικού εξαρτάται από την ικανότητα λείανσης της επιφάνειάς του.'
  },

  // --- ΧΗΜΙΚΕΣ ΙΔΙΟΤΗΤΕΣ ---
  {
    id: 23,
    category: 'Χημικές Ιδιότητες 1.8',
    question: 'Ποια είναι η κύρια χημική ιδιότητα για τα Πολυμερή;',
    answer: (
      <div className="text-left">
        <p><strong>Προσρόφηση (νερού)</strong> / Απώλεια ευδιάλυτων συστατικών.</p>
        <div className="mt-2 text-sm bg-gray-100 p-2 rounded">
           Στα Μαλακά επιστρώματα οδοντοστοιχιών.
        </div>
      </div>
    )
  },
  {
    id: 24,
    category: 'Χημικές Ιδιότητες',
    question: 'Ποιες είναι οι χημικές ιδιότητες για Μέταλλα και Κεραμικά;',
    answer: (
      <div className="text-left">
        <ul className="space-y-2">
          <li><strong>Μέταλλα:</strong> Αμαύρωση / Οξείδωση.</li>
          <li><strong>Κεραμικά:</strong> Χημική διάλυση.</li>
        </ul>
      </div>
    )
  },
  {
    id: 25,
    category: 'Χημικές Ιδιότητες',
    question: 'Σε τι οδηγεί η Χημική Διάλυση / Δυσχρωμία;',
    answer: (
      <div className="text-left">
        <ol className="list-decimal pl-5 font-semibold space-y-2">
          <li className="text-red-600">ΜΕΙΩΣΗ ΑΝΤΟΧΗΣ</li>
          <li className="text-red-800">ΤΟΞΙΚΟΤΗΤΑ (τοπική ή συστηματική)</li>
        </ol>
        <p className="text-sm mt-2 text-gray-500">Αιτίες δυσχρωμίας: Σουλφίδια, χλωρίδια.</p>
      </div>
    )
  },
  {
    id: 26,
    category: 'Χημικές Ιδιότητες',
    question: 'Τι συμβαίνει στα Πορώδη υλικά;',
    answer: (
      <div className="text-left">
        <p>Πορώδες υλικό → <strong>Προσρόφηση</strong></p>
        <p className="mt-1">↪ Αποτέλεσμα: Αποχρωματισμός, Αποδόμηση υλικών.</p>
      </div>
    )
  },

  // --- ΔΙΑΒΡΩΣΗ ---
  {
    id: 27,
    category: 'Διάβρωση',
    question: 'Τι είναι η Διάβρωση;',
    answer: 'Είναι η ηλεκτροχημική (ανοδική) αντίδραση του υλικού με το περιβάλλον.'
  },
  {
    id: 28,
    category: 'Διάβρωση',
    question: 'Πώς κατηγοριοποιείται η Διάβρωση;',
    answer: (
      <div className="text-left text-sm">
         <ul className="space-y-2">
            <li><strong>Ξηρή</strong> (Χημική)</li>
            <li>
              <strong>Υγρή</strong> (Ηλεκτροχημική):
              <ul className="pl-4 list-[square] mt-1 space-y-1 text-gray-700">
                <li>Ομοιόμορφη</li>
                <li>Εντοπισμένη:
                   <span className="block pl-4 text-xs">↘ Γαλβανική διάβρωση</span>
                   <span className="block pl-4 text-xs">↘ Διάβρωση σχισμών</span>
                </li>
              </ul>
            </li>
         </ul>
      </div>
    )
  }
];

export default function App() {
  const [currentIndex, setCurrentIndex] = useState(0);
  const [isFlipped, setIsFlipped] = useState(false);
  const [cards, setCards] = useState(flashcardsData);
  const [direction, setDirection] = useState(0); // -1 for left, 1 for right for simple anim

  const currentCard = cards[currentIndex];

  const handleNext = () => {
    setIsFlipped(false);
    setDirection(1);
    setTimeout(() => {
      setCurrentIndex((prev) => (prev + 1) % cards.length);
      setDirection(0);
    }, 150);
  };

  const handlePrev = () => {
    setIsFlipped(false);
    setDirection(-1);
    setTimeout(() => {
      setCurrentIndex((prev) => (prev - 1 + cards.length) % cards.length);
      setDirection(0);
    }, 150);
  };

  const handleShuffle = () => {
    setIsFlipped(false);
    const shuffled = [...flashcardsData].sort(() => Math.random() - 0.5);
    setCards(shuffled);
    setCurrentIndex(0);
  };

  const handleReset = () => {
    setIsFlipped(false);
    setCards(flashcardsData);
    setCurrentIndex(0);
  };

  return (
    <div className="min-h-screen bg-slate-100 flex flex-col items-center justify-center p-4 font-sans text-slate-800">
      <div className="w-full max-w-md mb-6 flex items-center justify-between">
        <h1 className="text-2xl font-bold flex items-center gap-2 text-slate-700">
          <Layers className="w-6 h-6 text-blue-600" />
          Οδοντιατρικά Υλικά
        </h1>
        <div className="text-sm font-medium text-slate-500">
          {currentIndex + 1} / {cards.length}
        </div>
      </div>

      <div 
        className="relative w-full max-w-md h-80 perspective-1000 group cursor-pointer"
        onClick={() => setIsFlipped(!isFlipped)}
      >
        <div className={`
          relative w-full h-full duration-500 transform-style-3d transition-transform
          ${isFlipped ? 'rotate-y-180' : ''}
          ${direction === 1 ? 'translate-x-[-10px] opacity-80' : ''}
          ${direction === -1 ? 'translate-x-[10px] opacity-80' : ''}
        `}>
          {/* Front Side */}
          <div className="absolute w-full h-full bg-white rounded-2xl shadow-xl p-8 flex flex-col items-center justify-center backface-hidden border-2 border-slate-100">
             <div className="absolute top-4 left-0 w-full flex justify-center">
                <span className="bg-blue-100 text-blue-800 text-xs font-semibold px-3 py-1 rounded-full uppercase tracking-wider">
                  {currentCard.category}
                </span>
             </div>
             <h2 className="text-xl font-bold text-center leading-relaxed text-slate-800">
               {currentCard.question}
             </h2>
             <p className="absolute bottom-6 text-xs text-slate-400 font-medium animate-pulse">
               Κλικ για απάντηση
             </p>
          </div>

          {/* Back Side */}
          <div className="absolute w-full h-full bg-slate-800 text-white rounded-2xl shadow-xl p-8 flex flex-col items-center justify-center backface-hidden rotate-y-180 overflow-y-auto custom-scrollbar">
             <div className="absolute top-4 left-0 w-full flex justify-center">
                <span className="bg-slate-700 text-slate-300 text-xs font-semibold px-3 py-1 rounded-full uppercase tracking-wider">
                  Απάντηση
                </span>
             </div>
             <div className="text-lg leading-relaxed w-full">
               {currentCard.answer}
             </div>
          </div>
        </div>
      </div>

      <div className="w-full max-w-md mt-8 grid grid-cols-4 gap-3">
        <button 
          onClick={handleReset}
          className="col-span-1 flex items-center justify-center p-3 rounded-xl bg-white shadow-sm text-slate-600 hover:bg-slate-50 active:scale-95 transition"
          title="Επαναφορά σειράς"
        >
          <RotateCw className="w-5 h-5" />
        </button>

        <button 
          onClick={handlePrev}
          className="col-span-1 flex items-center justify-center p-3 rounded-xl bg-white shadow-sm text-blue-600 hover:bg-blue-50 active:scale-95 transition"
        >
          <ChevronLeft className="w-6 h-6" />
        </button>

        <button 
          onClick={handleNext}
          className="col-span-1 flex items-center justify-center p-3 rounded-xl bg-white shadow-sm text-blue-600 hover:bg-blue-50 active:scale-95 transition"
        >
          <ChevronRight className="w-6 h-6" />
        </button>

        <button 
          onClick={handleShuffle}
          className="col-span-1 flex items-center justify-center p-3 rounded-xl bg-white shadow-sm text-purple-600 hover:bg-purple-50 active:scale-95 transition"
          title="Ανακάτεμα"
        >
          <Shuffle className="w-5 h-5" />
        </button>
      </div>

      <style jsx global>{`
        .perspective-1000 { perspective: 1000px; }
        .transform-style-3d { transform-style: preserve-3d; }
        .backface-hidden { backface-visibility: hidden; }
        .rotate-y-180 { transform: rotateY(180deg); }
        .custom-scrollbar::-webkit-scrollbar {
          width: 4px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: rgba(255, 255, 255, 0.1); 
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background: rgba(255, 255, 255, 0.3); 
          border-radius: 4px;
        }
      `}</style>
    </div>
  );
}
