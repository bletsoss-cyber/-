<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Î’Î¹Î¿Ï‹Î»Î¹ÎºÎ¬ - Î Î»Î®ÏÎµÏ‚ Quiz (15Q)</title>
    <!-- MathJax for formulas -->
    <script>
        window.MathJax = {
            tex: { inlineMath: [['$', '$'], ['\\(', '\\)']] },
            startup: {
                pageReady: () => {
                    return MathJax.startup.defaultPageReady();
                }
            }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #27ae60;
            --accent: #e74c3c;
            --bg: #f3f4f6;
            --card: #ffffff;
            --text: #1f2937;
        }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        header {
            background-color: var(--primary);
            color: white;
            padding: 1rem;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .container {
            max-width: 800px;
            margin: 20px auto;
            padding: 0 20px;
            flex: 1;
            width: 100%;
            box-sizing: border-box;
        }

        /* Menu Styles */
        .menu-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 40px;
        }

        .menu-btn {
            background: var(--card);
            border: 2px solid transparent;
            padding: 30px;
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            transition: transform 0.2s, box-shadow 0.2s, border-color 0.2s;
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
            font-family: inherit;
            color: inherit;
        }

        .menu-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px rgba(0,0,0,0.1);
            border-color: var(--secondary);
        }

        .menu-icon { font-size: 3rem; margin-bottom: 10px; }
        .menu-title { font-weight: bold; font-size: 1.3rem; margin-bottom: 5px; }
        .menu-desc { font-size: 0.9rem; color: #666; }

        /* Sections */
        .section { display: none; }
        .section.active { display: block; animation: fadeIn 0.3s ease-in-out; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Quiz UI */
        .question-card {
            background: var(--card);
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
            margin-bottom: 20px;
        }

        .question-text {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 20px;
            border-left: 5px solid var(--secondary);
            padding-left: 15px;
        }

        .option-btn {
            display: block;
            width: 100%;
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            text-align: left;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.2s;
            font-family: inherit;
        }

        .option-btn:hover { background: #e9ecef; }
        .option-btn.correct { background-color: #d1fae5; border-color: var(--secondary); color: #065f46; }
        .option-btn.wrong { background-color: #fee2e2; border-color: var(--accent); color: #991b1b; }

        /* Gap Fill UI */
        .gap-sentence { font-size: 1.3rem; line-height: 2.2; margin-bottom: 30px; }
        
        .gap-slot {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            min-width: 100px;
            height: 36px;
            border-bottom: 3px solid var(--primary);
            margin: 0 5px;
            vertical-align: middle;
            color: var(--secondary);
            font-weight: bold;
            cursor: pointer;
            background: #eef2ff;
            border-radius: 4px;
            padding: 0 10px;
            transition: background 0.2s;
        }
        
        .gap-slot.filled { border-bottom-color: var(--secondary); background: #f0fdf4; }
        .gap-slot.error { border-bottom-color: var(--accent); color: var(--accent); background: #fef2f2; }

        .word-bank {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            background: #f1f5f9;
            padding: 20px;
            border-radius: 8px;
        }

        .draggable-word {
            background: white;
            border: 1px solid #cbd5e1;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            user-select: none;
            box-shadow: 0 2px 2px rgba(0,0,0,0.05);
            font-weight: 500;
        }

        .draggable-word.selected { border-color: var(--secondary); background: #dcfce7; transform: scale(1.05); }
        .draggable-word.used { opacity: 0.4; pointer-events: none; background: #e2e8f0; }

        /* General UI */
        .controls { display: flex; justify-content: space-between; margin-top: 20px; align-items: center; }
        .header-bar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }

        .btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
        }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .btn-outline { background: transparent; color: var(--primary); border: 2px solid var(--primary); padding: 8px 16px; font-size: 0.9rem; }

        .feedback {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            display: none;
            line-height: 1.5;
        }
        .feedback.show { display: block; }
        .feedback-correct { background: #d1fae5; color: #064e3b; border: 1px solid #a7f3d0; }
        .feedback-wrong { background: #fee2e2; color: #7f1d1d; border: 1px solid #fecaca; }

        @media (max-width: 600px) {
            .menu-grid { grid-template-columns: 1fr; }
            .menu-btn { padding: 20px; }
        }
    </style>
</head>
<body>

<header>
    <h1>Î’Î™ÎŸÎ«Î›Î™ÎšÎ‘: Master Quiz</h1>
</header>

<!-- MAIN MENU -->
<div class="container section active" id="menuSection">
    <h2>Î•Ï€Î¯Î»ÎµÎ¾Îµ Î¤ÏÏŒÏ€Î¿ Î•Î¾Î­Ï„Î±ÏƒÎ·Ï‚</h2>
    <div class="menu-grid">
        <button class="menu-btn" id="btnMcq">
            <span class="menu-icon">ğŸ“</span>
            <span class="menu-title">Î Î¿Î»Î»Î±Ï€Î»Î®Ï‚ Î•Ï€Î¹Î»Î¿Î³Î®Ï‚</span>
            <span class="menu-desc">15 Î•ÏÏ‰Ï„Î®ÏƒÎµÎ¹Ï‚ Î˜ÎµÏ‰ÏÎ¯Î±Ï‚</span>
        </button>
        <button class="menu-btn" id="btnGap">
            <span class="menu-icon">ğŸ§©</span>
            <span class="menu-title">Î£Ï…Î¼Ï€Î»Î®ÏÏ‰ÏƒÎ· ÎšÎµÎ½ÏÎ½</span>
            <span class="menu-desc">5 Î‘ÏƒÎºÎ®ÏƒÎµÎ¹Ï‚ (Î™ÎµÏÎ±ÏÏ‡Î¯ÎµÏ‚ & Î¤ÏÏ€Î¿Î¹)</span>
        </button>
    </div>
</div>

<!-- MCQ SECTION -->
<div class="container section" id="mcqSection">
    <div class="header-bar">
        <span id="mcqProgress" style="font-weight:bold; color:var(--primary);">Î•ÏÏÏ„Î·ÏƒÎ· 1/15</span>
        <button class="btn-outline" id="btnExitMcq">ÎˆÎ¾Î¿Î´Î¿Ï‚</button>
    </div>
    
    <div class="question-card">
        <div class="question-text" id="mcqQuestion">Loading...</div>
        <div id="mcqOptions"></div>
        <div class="feedback" id="mcqFeedback"></div>
    </div>
    
    <div class="controls">
        <button class="btn" id="mcqNext" disabled>Î•Ï€ÏŒÎ¼ÎµÎ½Î¿</button>
    </div>
</div>

<!-- GAP FILL SECTION -->
<div class="container section" id="gapSection">
    <div class="header-bar">
        <span id="gapProgress" style="font-weight:bold; color:var(--primary);">Î†ÏƒÎºÎ·ÏƒÎ· 1/5</span>
        <button class="btn-outline" id="btnExitGap">ÎˆÎ¾Î¿Î´Î¿Ï‚</button>
    </div>
    
    <div class="question-card">
        <p style="color: #666; font-size: 0.9rem; margin-top:0;">1. ÎšÎ»Î¹Îº ÏƒÏ„Î· Î»Î­Î¾Î·. 2. ÎšÎ»Î¹Îº ÏƒÏ„Î¿ ÎºÎµÎ½ÏŒ.</p>
        <div class="gap-sentence" id="gapSentence"></div>
        <div class="word-bank" id="gapBank"></div>
        <div class="feedback" id="gapFeedback"></div>
    </div>

    <div class="controls">
        <button class="btn btn-outline" id="gapReset">ÎšÎ±Î¸Î±ÏÎ¹ÏƒÎ¼ÏŒÏ‚</button>
        <button class="btn" id="gapCheck">ÎˆÎ»ÎµÎ³Ï‡Î¿Ï‚</button>
    </div>
</div>

<script>
    // --- DATA ---
    // Expanded to 15 Questions based on all notes
    const mcqData = [
        // Page 1: Structure & Bonds
        {
            q: "Î Î¿Î¹Î± ÎµÎ¯Î½Î±Î¹ Î· ÏƒÏ‰ÏƒÏ„Î® Î¹ÎµÏÎ±ÏÏ‡Î¯Î± Î¹ÏƒÏ‡ÏÎ¿Ï‚ Ï„Ï‰Î½ Î´ÎµÏƒÎ¼ÏÎ½ (Î±Ï€ÏŒ Ï„Î¿Î½ Î±ÏƒÎ¸ÎµÎ½Î­ÏƒÏ„ÎµÏÎ¿ ÏƒÏ„Î¿Î½ Î¹ÏƒÏ‡Ï…ÏÏŒÏ„ÎµÏÎ¿);",
            options: ["Î™Î¿Î½Ï„Î¹ÎºÏŒÏ‚ < ÎœÎµÏ„Î±Î»Î»Î¹ÎºÏŒÏ‚ < ÎŸÎ¼Î¿Î¹Î¿Ï€Î¿Î»Î¹ÎºÏŒÏ‚", "ÎœÎµÏ„Î±Î»Î»Î¹ÎºÏŒÏ‚ < Î™Î¿Î½Ï„Î¹ÎºÏŒÏ‚ < ÎŸÎ¼Î¿Î¹Î¿Ï€Î¿Î»Î¹ÎºÏŒÏ‚", "ÎŸÎ¼Î¿Î¹Î¿Ï€Î¿Î»Î¹ÎºÏŒÏ‚ < Î™Î¿Î½Ï„Î¹ÎºÏŒÏ‚ < ÎœÎµÏ„Î±Î»Î»Î¹ÎºÏŒÏ‚", "ÎœÎµÏ„Î±Î»Î»Î¹ÎºÏŒÏ‚ < ÎŸÎ¼Î¿Î¹Î¿Ï€Î¿Î»Î¹ÎºÏŒÏ‚ < Î™Î¿Î½Ï„Î¹ÎºÏŒÏ‚"],
            correct: 1,
            explanation: "Î£ÏÎ¼Ï†Ï‰Î½Î± Î¼Îµ Ï„Î¹Ï‚ ÏƒÎ·Î¼ÎµÎ¹ÏÏƒÎµÎ¹Ï‚: ÎœÎµÏ„Î±Î»Î»Î¹ÎºÏŒÏ‚ < Î™Î¿Î½Ï„Î¹ÎºÏŒÏ‚ < ÎŸÎ¼Î¿Î¹Î¿Ï€Î¿Î»Î¹ÎºÏŒÏ‚."
        },
        {
            q: "Î Î¿Î¹Î¿ Î±Ï€ÏŒ Ï„Î± Ï€Î±ÏÎ±ÎºÎ¬Ï„Ï‰ Î”Î•Î Î±Î½Î±Ï†Î­ÏÎµÏ„Î±Î¹ Ï‰Ï‚ Ï„ÏÏ€Î¿Ï‚ Î´ÎµÏƒÎ¼Î¿Ï Van der Waals;",
            options: ["Î”Î¹Ï€ÏŒÎ»Î¿Ï… - Î”Î¹Ï€ÏŒÎ»Î¿Ï…", "ÎŸÎ¼Î¿Î¹Î¿Ï€Î¿Î»Î¹ÎºÏŒÏ‚", "Î•Î¾ ÎµÏ€Î±Î³Ï‰Î³Î®Ï‚", "London"],
            correct: 1,
            explanation: "ÎŸÎ¹ Î´ÎµÏƒÎ¼Î¿Î¯ Van der Waals ÎµÎ¯Î½Î±Î¹: Î”Î¹Ï€ÏŒÎ»Î¿Ï…-Î”Î¹Ï€ÏŒÎ»Î¿Ï…, Î•Î¾ ÎµÏ€Î±Î³Ï‰Î³Î®Ï‚ ÎºÎ±Î¹ London. ÎŸ ÎŸÎ¼Î¿Î¹Î¿Ï€Î¿Î»Î¹ÎºÏŒÏ‚ ÎµÎ¯Î½Î±Î¹ ÎºÏÏÎ¹Î¿Ï‚ Î´ÎµÏƒÎ¼ÏŒÏ‚."
        },
        {
            q: "Î¤Î¹ Ï‡Î±ÏÎ±ÎºÏ„Î·ÏÎ¯Î¶ÎµÎ¹ Ï„Î¿Î½ Î¼ÎµÏ„Î±Î»Î»Î¹ÎºÏŒ Î´ÎµÏƒÎ¼ÏŒ;",
            options: ["Î•Î¯Î½Î±Î¹ Î¹ÏƒÏ‡Ï…ÏÏŒÏ‚ ÎºÎ±Î¹ ÎºÎ±Ï„ÎµÏ…Î¸Ï…Î½Ï„Î¹ÎºÏŒÏ‚", "Î¤Î± Î·Î»ÎµÎºÏ„ÏÏŒÎ½Î¹Î± ÎµÎ¯Î½Î±Î¹ ÏƒÏ„Î±Î¸ÎµÏÎ¬", "Î•Î¯Î½Î±Î¹ Î¼Î·-ÎºÎ±Ï„ÎµÏ…Î¸Ï…Î½Ï„Î¹ÎºÏŒÏ‚ ÎºÎ±Î¹ Î­Ï‡ÎµÎ¹ Î·Î»ÎµÎºÏ„ÏÏŒÎ½Î¹Î± Ï€Î¿Ï… ÎºÎ¹Î½Î¿ÏÎ½Ï„Î±Î¹", "Î•Î¼Ï†Î±Î½Î¯Î¶ÎµÏ„Î±Î¹ Î¼ÏŒÎ½Î¿ ÏƒÎµ ÎºÎµÏÎ±Î¼Î¹ÎºÎ¬"],
            correct: 2,
            explanation: "ÎŸ Î¼ÎµÏ„Î±Î»Î»Î¹ÎºÏŒÏ‚ Î´ÎµÏƒÎ¼ÏŒÏ‚ ÎµÎ¯Î½Î±Î¹ Î¼Î·-ÎºÎ±Ï„ÎµÏ…Î¸Ï…Î½Ï„Î¹ÎºÏŒÏ‚, Î¼Îµ 'Î½Î­Ï†Î¿Ï‚' Î·Î»ÎµÎºÏ„ÏÎ¿Î½Î¯Ï‰Î½ Ï€Î¿Ï… ÎºÎ¹Î½Î¿ÏÎ½Ï„Î±Î¹, Î´Î·Î¼Î¹Î¿Ï…ÏÎ³ÏÎ½Ï„Î±Ï‚ ÏŒÏ‡Î¹ Î¹ÏƒÏ‡Ï…ÏÎ­Ï‚ Î´Ï…Î½Î¬Î¼ÎµÎ¹Ï‚."
        },
        // Page 1: Basics Mechanics
        {
            q: "Î Î¿Î¹Î¿Ï‚ ÎµÎ¯Î½Î±Î¹ Î¿ ÎÏŒÎ¼Î¿Ï‚ Ï„Î¿Ï… Hooke;",
            options: ["$\\sigma = F/A$", "$E = \\sigma / e$", "$e = \\Delta L / L_0$", "$R = P^2 / 2E$"],
            correct: 1,
            explanation: "ÎŸ ÎÏŒÎ¼Î¿Ï‚ Ï„Î¿Ï… Hooke ÎµÎ¯Î½Î±Î¹ $E = \\sigma / e$ ÎºÎ±Î¹ ÎµÎºÏ†ÏÎ¬Î¶ÎµÎ¹ Ï„Î¿ ÎœÎ­Ï„ÏÎ¿ Î‘ÎºÎ±Î¼ÏˆÎ¯Î±Ï‚."
        },
        {
            q: "Î Î¿Î¹Î¿Ï‚ ÎµÎ¯Î½Î±Î¹ Î¿ Ï„ÏÏ€Î¿Ï‚ Î³Î¹Î± Ï„Î·Î½ Î¤Î¬ÏƒÎ· (stress);",
            options: ["$F \\cdot A$", "$F / A$", "$A / F$", "$(L_i - L_0)/L_0$"],
            correct: 1,
            explanation: "Î— Î¤Î¬ÏƒÎ· Î¿ÏÎ¯Î¶ÎµÏ„Î±Î¹ Ï‰Ï‚ Î”ÏÎ½Î±Î¼Î· Î±Î½Î¬ Î¼Î¿Î½Î¬Î´Î± Î•Ï€Î¹Ï†Î¬Î½ÎµÎ¹Î±Ï‚: $\\sigma = F/A$ (Pa)."
        },
        // Page 2: Stress Types & Definitions
        {
            q: "Î Î¿Î¹Î± ÎºÎ¯Î½Î·ÏƒÎ· Î±Ï„ÏŒÎ¼Ï‰Î½ Ï‡Î±ÏÎ±ÎºÏ„Î·ÏÎ¯Î¶ÎµÎ¹ Ï„Î· Î”Î¹Î¬Ï„Î¼Î·ÏƒÎ·;",
            options: ["Î‘Ï€Î¿Î¼Î¬ÎºÏÏ…Î½ÏƒÎ· Î±Ï„ÏŒÎ¼Ï‰Î½ ($\\uparrow \\downarrow$)", "Î ÏÎ¿ÏƒÎ­Î³Î³Î¹ÏƒÎ· Î±Ï„ÏŒÎ¼Ï‰Î½ ($\\downarrow \\uparrow$)", "Î Î±ÏÎ¬Î»Î»Î·Î»Î· Î¼ÎµÏ„Î±ÎºÎ¯Î½Î·ÏƒÎ· Î±Ï„ÏŒÎ¼Ï‰Î½ ($\\nearrow \\swarrow$)", "Î ÎµÏÎ¹ÏƒÏ„ÏÎ¿Ï†Î® Î±Ï„ÏŒÎ¼Ï‰Î½"],
            correct: 2,
            explanation: "Î— Î”Î¹Î¬Ï„Î¼Î·ÏƒÎ· Ï€ÏÎ¿ÎºÎ±Î»ÎµÎ¯ Ï€Î±ÏÎ¬Î»Î»Î·Î»Î· Î¼ÎµÏ„Î±ÎºÎ¯Î½Î·ÏƒÎ· Ï„Ï‰Î½ Î±Ï„ÏŒÎ¼Ï‰Î½."
        },
        {
            q: "Î¤Î¹ ÎµÎ¯Î½Î±Î¹ Î· 'Î¤Î¬ÏƒÎ· Î‘Î½Ï„Î¿Ï‡Î®Ï‚' (Proof Stress);",
            options: ["Î— Î¼Î­Î³Î¹ÏƒÏ„Î· Ï„Î¬ÏƒÎ· Ï€Î¿Ï… Î±Î½Ï„Î­Ï‡ÎµÎ¹ Ï„Î¿ Ï…Î»Î¹ÎºÏŒ", "Î— Ï„Î¬ÏƒÎ· Î­Î½Î±ÏÎ¾Î·Ï‚ ÎµÎ»Î±ÏƒÏ„Î¹ÎºÏŒÏ„Î·Ï„Î±Ï‚", "Î— Ï„Î¬ÏƒÎ· Î³Î¹Î± 0,2% Î¼ÏŒÎ½Î¹Î¼Î· (Ï€Î»Î±ÏƒÏ„Î¹ÎºÎ®) Ï€Î±ÏÎ±Î¼ÏŒÏÏ†Ï‰ÏƒÎ·", "Î— Ï„Î¬ÏƒÎ· Î¸ÏÎ±ÏÏƒÎ·Ï‚"],
            correct: 2,
            explanation: "Î— Î¤Î¬ÏƒÎ· Î‘Î½Ï„Î¿Ï‡Î®Ï‚ Î¿ÏÎ¯Î¶ÎµÏ„Î±Î¹ Ï‰Ï‚ Î· Ï„Î¬ÏƒÎ· Ï€Î¿Ï… Î±Î½Ï„Î¹ÏƒÏ„Î¿Î¹Ï‡ÎµÎ¯ ÏƒÎµ 0,2% Î¼ÏŒÎ½Î¹Î¼Î· Ï€Î±ÏÎ±Î¼ÏŒÏÏ†Ï‰ÏƒÎ·."
        },
        {
            q: "Î¤Î¹ Î¿ÏÎ¯Î¶Î¿Ï…Î¼Îµ Ï‰Ï‚ ÎŸÎ»ÎºÎ¹Î¼ÏŒÏ„Î·Ï„Î±;",
            options: ["Î¤Î¿ Î¼Î­Î³ÎµÎ¸Î¿Ï‚ Ï„Î·Ï‚ ÎµÎ»Î±ÏƒÏ„Î¹ÎºÎ®Ï‚ Ï€Î±ÏÎ±Î¼ÏŒÏÏ†Ï‰ÏƒÎ·Ï‚", "Î¤Î·Î½ Î±Î½Ï„Î¯ÏƒÏ„Î±ÏƒÎ· ÏƒÏ„Î·Î½ ÎºÏÎ¿ÏÏƒÎ·", "Î¤Î¿ Î¼Î­Î³ÎµÎ¸Î¿Ï‚ Ï„Î·Ï‚ Ï€Î»Î±ÏƒÏ„Î¹ÎºÎ®Ï‚ Ï€Î±ÏÎ±Î¼ÏŒÏÏ†Ï‰ÏƒÎ·Ï‚ ÎºÎ±Ï„Î¬ Ï„Î·Î½ Î¸ÏÎ±ÏÏƒÎ·", "Î¤Î·Î½ Ï„Î¬ÏƒÎ· ÎµÎ½Î´Î¿Ï„Î¹ÎºÏŒÏ„Î·Ï„Î±Ï‚"],
            correct: 2,
            explanation: "ÎŸÎ»ÎºÎ¹Î¼ÏŒÏ„Î·Ï„Î± ÎµÎ¯Î½Î±Î¹ Ï„Î¿ Î¼Î­Î³ÎµÎ¸Î¿Ï‚ Ï„Î·Ï‚ Ï€Î»Î±ÏƒÏ„Î¹ÎºÎ®Ï‚ Ï€Î±ÏÎ±Î¼ÏŒÏÏ†Ï‰ÏƒÎ·Ï‚ Ï€Î¿Ï… Î­Ï‡ÎµÎ¹ ÏƒÏ…Î¼Î²ÎµÎ¯ Î¼Î­Ï‡ÏÎ¹ Ï„Î· Î¸ÏÎ±ÏÏƒÎ·."
        },
        {
            q: "Î£Ï„Î¿Î½ ÎµÏ†ÎµÎ»ÎºÏ…ÏƒÎ¼ÏŒ Î¿Î»Î¯ÏƒÎ¹Î¼Ï‰Î½ Ï…Î»Î¹ÎºÏÎ½, Ï„Î¹ ÏƒÏ…Î¼Î²Î±Î¯Î½ÎµÎ¹ ÏƒÏ„Î·Î½ Î´Î¹Î±Ï„Î¿Î¼Î® (A);",
            options: ["Î‘Ï…Î¾Î¬Î½ÎµÏ„Î±Î¹", "ÎœÎµÎ¹ÏÎ½ÎµÏ„Î±Î¹", "ÎœÎ­Î½ÎµÎ¹ ÏƒÏ„Î±Î¸ÎµÏÎ®", "ÎœÎ·Î´ÎµÎ½Î¯Î¶ÎµÏ„Î±Î¹"],
            correct: 1,
            explanation: "ÎšÎ±Î¸ÏÏ‚ Ï„Î¿ Î¼Î®ÎºÎ¿Ï‚ Î±Ï…Î¾Î¬Î½ÎµÏ„Î±Î¹ ($l \\uparrow$), Î· Î´Î¹Î±Ï„Î¿Î¼Î® Î¼ÎµÎ¹ÏÎ½ÎµÏ„Î±Î¹ ($A \\downarrow$)."
        },
        {
            q: "Î Î¿Î¹Î¿Ï‚ ÎµÎ¯Î½Î±Î¹ Î¿ Ï„ÏÏ€Î¿Ï‚ Ï„Î·Ï‚ Î”Î¹Î±Î¼ÎµÏ„ÏÎ¹ÎºÎ®Ï‚ Î•Ï†ÎµÎ»ÎºÏ…ÏƒÏ„Î¹ÎºÎ®Ï‚ Î¤Î¬ÏƒÎ·Ï‚ (ÏƒÎµ Î´Î¯ÏƒÎºÎ¿);",
            options: ["$\\sigma = F/A$", "$\\sigma = 2P / (\\pi \\cdot D \\cdot T)$", "$\\sigma = P^2 / 2E$", "$\\sigma = \\sigma_{UTS}$"],
            correct: 1,
            explanation: "Î“Î¹Î± Î´Î¯ÏƒÎºÎ¿ Î¼Îµ ÎºÎ¬Î¸ÎµÏ„Î· Ï†ÏŒÏÏ„Î¹ÏƒÎ·: $\\sigma = \\frac{2P}{\\pi \\cdot D \\cdot T}$."
        },
        // Page 2 & 3: Energy & Fracture
        {
            q: "Î Î¿Î¹Î¿Ï‚ ÎµÎ¯Î½Î±Î¹ Î¿ Ï„ÏÏ€Î¿Ï‚ Ï„Î·Ï‚ Î•Ï…ÎºÎ±Î¼ÏˆÎ¯Î±Ï‚ (Resilience);",
            options: ["$R = P^2 / 2E$", "$R = \\sigma / e$", "$R = F \\cdot A$", "$R = 1/2 \\cdot m \\cdot v^2$"],
            correct: 0,
            explanation: "Î— Î•Ï…ÎºÎ±Î¼ÏˆÎ¯Î± Î´Î¯Î½ÎµÏ„Î±Î¹ Î±Ï€ÏŒ Ï„Î¿Î½ Ï„ÏÏ€Î¿ $R = P^2 / 2E$."
        },
        {
            q: "Î¤Î¹ ÎµÎ¯Î½Î±Î¹ Î· 'Î˜ÏÎ±ÏÏƒÎ· Î‘ÎºÎ±Î¼ÏˆÎ¯Î±Ï‚' (Brittle Fracture);",
            options: ["Î‘ÏÎ³Î® Ï€Î±ÏÎ±Î¼ÏŒÏÏ†Ï‰ÏƒÎ·", "Î¤Î±Ï‡ÎµÎ¯Î± Î¸ÏÎ±ÏÏƒÎ· Î»ÏŒÎ³Ï‰ ÎµÏ€Î­ÎºÏ„Î±ÏƒÎ·Ï‚ Î±ÏƒÏ„Î±Î¸Î¿ÏÏ‚ ÏÏ‰Î³Î¼Î®Ï‚", "Î˜ÏÎ±ÏÏƒÎ· Î¼ÎµÏ„Î¬ Î±Ï€ÏŒ Î¼ÎµÎ³Î¬Î»ÎµÏ‚ Ï€Î»Î±ÏƒÏ„Î¹ÎºÎ­Ï‚ Ï€Î±ÏÎ±Î¼Î¿ÏÏ†ÏÏƒÎµÎ¹Ï‚", "Î˜ÏÎ±ÏÏƒÎ· Î»ÏŒÎ³Ï‰ ÎºÏŒÏ€Ï‰ÏƒÎ·Ï‚"],
            correct: 1,
            explanation: "Î— Î¸ÏÎ±ÏÏƒÎ· Î±ÎºÎ±Î¼ÏˆÎ¯Î±Ï‚ ÏƒÏ…Î¼Î²Î±Î¯Î½ÎµÎ¹ Ï„Î±Ï‡Î­Ï‰Ï‚ Î»ÏŒÎ³Ï‰ Î±ÏƒÏ„Î±Î¸Î¿ÏÏ‚ ÏÏ‰Î³Î¼Î®Ï‚."
        },
        // Page 3: Tests & Clinical
        {
            q: "Î¤Î¹ Î¼ÎµÏ„ÏÎ¬ÎµÎ¹ Î· Î”Î¿ÎºÎ¹Î¼Î±ÏƒÎ¯Î± ÎšÏÎ¿ÏÏƒÎ·Ï‚;",
            options: ["Î¤Î·Î½ ÎºÏŒÏ€Ï‰ÏƒÎ· Ï„Î¿Ï… Ï…Î»Î¹ÎºÎ¿Ï", "Î¤Î¿Î½ ÎµÏÏ€Ï…ÏƒÎ¼ÏŒ", "Î¤Î·Î½ ÎµÎ½Î­ÏÎ³ÎµÎ¹Î± Ï€Î¿Ï… Î±Ï€Î¿ÏÏÎ¿Ï†Î®Î¸Î·ÎºÎµ Î³Î¹Î± Ï„Î· Î¸ÏÎ±ÏÏƒÎ· ($\\Delta H$)", "Î¤Î·Î½ ÏƒÎºÎ»Î·ÏÏŒÏ„Î·Ï„Î± ÎµÏ€Î¹Ï†Î¬Î½ÎµÎ¹Î±Ï‚"],
            correct: 2,
            explanation: "Î— Î´Î¿ÎºÎ¹Î¼Î±ÏƒÎ¯Î± ÎºÏÎ¿ÏÏƒÎ·Ï‚ Î¼ÎµÏ„ÏÎ¬ÎµÎ¹ Ï„Î·Î½ ÎµÎ½Î­ÏÎ³ÎµÎ¹Î± (Î¼ÎµÏ„Î±Î²Î¿Î»Î® $\\Delta H$ Ï„Î¿Ï… ÎµÎºÎºÏÎµÎ¼Î¿ÏÏ‚) Ï€Î¿Ï… Î±Ï€Î¿ÏÏÏŒÏ†Î·ÏƒÎµ Ï„Î¿ Î´Î¿ÎºÎ¯Î¼Î¹Î¿."
        },
        {
            q: "Î¤Î¹ ÎµÎ¯Î½Î±Î¹ Î· ÎšÏŒÏ€Ï‰ÏƒÎ· (Fatigue);",
            options: ["ÎœÏŒÎ½Î¹Î¼Î· Ï€Î±ÏÎ±Î¼ÏŒÏÏ†Ï‰ÏƒÎ· Ï…Ï€ÏŒ ÏƒÏ„Î±Î¸ÎµÏÎ® Ï„Î¬ÏƒÎ·", "Î˜ÏÎ±ÏÏƒÎ· Î±Ï€ÏŒ ÏƒÏ„Î±Î´Î¹Î±ÎºÎ® ÏƒÏ…ÏƒÏƒÏÏÎµÏ…ÏƒÎ· Ï€Î±ÏÎ±Î¼ÏŒÏÏ†Ï‰ÏƒÎ·Ï‚ ÏƒÎµ ÎµÎ½Î±Î»Î»Î±ÏƒÏƒÏŒÎ¼ÎµÎ½ÎµÏ‚ Ï„Î¬ÏƒÎµÎ¹Ï‚", "Î‘Î½Ï„Î¿Ï‡Î® ÏƒÎµ ÎºÏÎ¿ÏÏƒÎ·", "Î•Î»Î±ÏƒÏ„Î¹ÎºÎ® ÎµÏ€Î±Î½Î±Ï†Î¿ÏÎ¬"],
            correct: 1,
            explanation: "Î— ÎºÏŒÏ€Ï‰ÏƒÎ· Ï€ÏÎ¿ÎºÎ±Î»ÎµÎ¯Ï„Î±Î¹ Î±Ï€ÏŒ ÎºÏÎºÎ»Î¿Ï…Ï‚ ÎµÎ½Î±Î»Î»Î±ÏƒÏƒÏŒÎ¼ÎµÎ½Ï‰Î½ Ï„Î¬ÏƒÎµÏ‰Î½ (ÏŒÏ‡Î¹ ÏƒÏ„Î±Î¸ÎµÏÎ® Ï„Î¬ÏƒÎ·)."
        },
        {
            q: "ÎšÎ»Î¹Î½Î¹ÎºÎ® ÏƒÎ·Î¼Î±ÏƒÎ¯Î±: Î¤Î¹ ÏƒÏ…Î¼Î²Î±Î¯Î½ÎµÎ¹ Î±Î½ ÏƒÎµ Î¼ÎµÏ„Î±Î»Î»Î¹ÎºÎ® Î±Ï€Î¿ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ· Î· Ï„Î¬ÏƒÎ· Î¾ÎµÏ€ÎµÏÎ¬ÏƒÎµÎ¹ Ï„Î·Î½ Ï„Î¬ÏƒÎ· ÎµÎ½Î´Î¿Ï„Î¹ÎºÏŒÏ„Î·Ï„Î±Ï‚;",
            options: ["Î¤Î¿ Ï…Î»Î¹ÎºÏŒ ÏƒÏ€Î¬ÎµÎ¹ Î±Î¼Î­ÏƒÏ‰Ï‚", "Î ÏÎ¿ÎºÎ±Î»ÎµÎ¯Ï„Î±Î¹ Î¼ÏŒÎ½Î¹Î¼Î· (Ï€Î»Î±ÏƒÏ„Î¹ÎºÎ®) Ï€Î±ÏÎ±Î¼ÏŒÏÏ†Ï‰ÏƒÎ·", "Î”ÎµÎ½ ÏƒÏ…Î¼Î²Î±Î¯Î½ÎµÎ¹ Ï„Î¯Ï€Î¿Ï„Î±", "Î¤Î¿ Ï…Î»Î¹ÎºÏŒ Î³Î¯Î½ÎµÏ„Î±Î¹ Ï€Î¹Î¿ ÏƒÎºÎ»Î·ÏÏŒ"],
            correct: 1,
            explanation: "Î¥Ï€Î­ÏÎ²Î±ÏƒÎ· Ï„Î¬ÏƒÎ·Ï‚ ÎµÎ½Î´Î¿Ï„Î¹ÎºÏŒÏ„Î·Ï„Î±Ï‚ $\\rightarrow$ ÎœÏŒÎ½Î¹Î¼Î· Ï€Î±ÏÎ±Î¼ÏŒÏÏ†Ï‰ÏƒÎ·."
        }
    ];

    const gapData = [
        {
            sentence: "Î™ÎµÏÎ±ÏÏ‡Î¯Î±: {0} < {1} < {2}",
            words: ["Î™Î¿Î½Ï„Î¹ÎºÏŒÏ‚", "ÎœÎµÏ„Î±Î»Î»Î¹ÎºÏŒÏ‚", "ÎŸÎ¼Î¿Î¹Î¿Ï€Î¿Î»Î¹ÎºÏŒÏ‚", "VanDerWaals"],
            correct: ["ÎœÎµÏ„Î±Î»Î»Î¹ÎºÏŒÏ‚", "Î™Î¿Î½Ï„Î¹ÎºÏŒÏ‚", "ÎŸÎ¼Î¿Î¹Î¿Ï€Î¿Î»Î¹ÎºÏŒÏ‚"],
            hint: "ÎŸ Î¼ÎµÏ„Î±Î»Î»Î¹ÎºÏŒÏ‚ ÎµÎ¯Î½Î±Î¹ Î¿ Ï€Î¹Î¿ Î±ÏƒÎ¸ÎµÎ½Î®Ï‚."
        },
        {
            sentence: "Î¤Î¬ÏƒÎµÎ¹Ï‚: {0} (Î±Ï€Î¿Î¼Î¬ÎºÏÏ…Î½ÏƒÎ·), {1} (Ï€ÏÎ¿ÏƒÎ­Î³Î³Î¹ÏƒÎ·), {2} (Ï€Î±ÏÎ¬Î»Î»Î·Î»Î· ÎºÎ¯Î½Î·ÏƒÎ·).",
            words: ["Î”Î¹Î¬Ï„Î¼Î·ÏƒÎ·", "Î£Ï…Î¼Ï€Î¯ÎµÏƒÎ·", "Î•Ï†ÎµÎ»ÎºÏ…ÏƒÎ¼ÏŒÏ‚", "ÎšÎ¬Î¼ÏˆÎ·"],
            correct: ["Î•Ï†ÎµÎ»ÎºÏ…ÏƒÎ¼ÏŒÏ‚", "Î£Ï…Î¼Ï€Î¯ÎµÏƒÎ·", "Î”Î¹Î¬Ï„Î¼Î·ÏƒÎ·"],
            hint: "Î•Ï†ÎµÎ»ÎºÏ…ÏƒÎ¼ÏŒÏ‚ Ï„ÏÎ±Î²Î¬ÎµÎ¹, Î£Ï…Î¼Ï€Î¯ÎµÏƒÎ· Ï€Î¹Î­Î¶ÎµÎ¹."
        },
        {
            sentence: "Î— {0} ÎµÎ¯Î½Î±Î¹ Î· Ï„Î¬ÏƒÎ· Î­Î½Î±ÏÎ¾Î·Ï‚ Ï€Î»Î±ÏƒÏ„Î¹ÎºÎ®Ï‚ Ï€Î±ÏÎ±Î¼ÏŒÏÏ†Ï‰ÏƒÎ·Ï‚. Î— {1} ÎµÎ¯Î½Î±Î¹ Î· Ï„Î¬ÏƒÎ· Î¸ÏÎ±ÏÏƒÎ·Ï‚.",
            words: ["Î¤Î¬ÏƒÎ· Î‘Î½Ï„Î¿Ï‡Î®Ï‚", "Î¤Î¬ÏƒÎ· Î•Î½Î´Î¿Ï„Î¹ÎºÏŒÏ„Î·Ï„Î±Ï‚", "Î¤Î¬ÏƒÎ· Î˜ÏÎ±ÏÏƒÎ·Ï‚", "Î¤ÎµÎ»Î¹ÎºÎ® Î‘Î½Ï„Î¿Ï‡Î®"],
            correct: ["Î¤Î¬ÏƒÎ· Î•Î½Î´Î¿Ï„Î¹ÎºÏŒÏ„Î·Ï„Î±Ï‚", "Î¤Î¬ÏƒÎ· Î˜ÏÎ±ÏÏƒÎ·Ï‚"],
            hint: "Î— ÎµÎ½Î´Î¿Ï„Î¹ÎºÏŒÏ„Î·Ï„Î± ÎµÎ¯Î½Î±Î¹ Ï„Î¿ ÏŒÏÎ¹Î¿."
        },
        {
            sentence: "Î¤ÏÏ€Î¿Î¹: Î¤Î¬ÏƒÎ· $\\sigma$ = {0}, Î Î±ÏÎ±Î¼ÏŒÏÏ†Ï‰ÏƒÎ· $e$ = {1}",
            words: ["F/A", "(Li-Lo)/Lo", "P^2/2E", "Ïƒ/e"],
            correct: ["F/A", "(Li-Lo)/Lo"],
            hint: "Î”ÏÎ½Î±Î¼Î· Ï€ÏÎ¿Ï‚ ÎµÏ€Î¹Ï†Î¬Î½ÎµÎ¹Î±."
        },
        {
            sentence: "Î•ÏÏ€Ï…ÏƒÎ¼ÏŒÏ‚: ÎœÏŒÎ½Î¹Î¼Î· Ï€Î±ÏÎ±Î¼ÏŒÏÏ†Ï‰ÏƒÎ· Ï…Ï€ÏŒ {0} Ï„Î¬ÏƒÎ·. ÎšÏŒÏ€Ï‰ÏƒÎ·: Î˜ÏÎ±ÏÏƒÎ· Ï…Ï€ÏŒ {1} Ï„Î¬ÏƒÎµÎ¹Ï‚.",
            words: ["ÏƒÏ„Î±Î¸ÎµÏÎ®", "ÎµÎ½Î±Î»Î»Î±ÏƒÏƒÏŒÎ¼ÎµÎ½ÎµÏ‚", "Î¼Î·Î´ÎµÎ½Î¹ÎºÎ®", "Î¼Î­Î³Î¹ÏƒÏ„Î·"],
            correct: ["ÏƒÏ„Î±Î¸ÎµÏÎ®", "ÎµÎ½Î±Î»Î»Î±ÏƒÏƒÏŒÎ¼ÎµÎ½ÎµÏ‚"],
            hint: "ÎŸ ÎµÏÏ€Ï…ÏƒÎ¼ÏŒÏ‚ Î¸Î­Î»ÎµÎ¹ Ï‡ÏÏŒÎ½Î¿ ÎºÎ±Î¹ ÏƒÏ„Î±Î¸ÎµÏÏŒÏ„Î·Ï„Î±."
        }
    ];

    // --- STATE & DOM ELEMENTS ---
    let currentMcq = 0;
    let currentGap = 0;
    let gapSelection = null; // {el, text}
    let gapAnswers = [];

    // --- EVENT LISTENERS (Safe Loading) ---
    document.addEventListener('DOMContentLoaded', () => {
        
        // Navigation Buttons
        document.getElementById('btnMcq').addEventListener('click', () => switchSection('mcqSection'));
        document.getElementById('btnGap').addEventListener('click', () => switchSection('gapSection'));
        document.getElementById('btnExitMcq').addEventListener('click', () => switchSection('menuSection'));
        document.getElementById('btnExitGap').addEventListener('click', () => switchSection('menuSection'));

        // MCQ Actions
        document.getElementById('mcqNext').addEventListener('click', nextMcq);

        // Gap Actions
        document.getElementById('gapCheck').addEventListener('click', handleGapAction);
        document.getElementById('gapReset').addEventListener('click', loadGap);

        // Initial Load
        loadMcq();
        loadGap();
    });

    function switchSection(id) {
        document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        
        // Refresh MathJax if needed
        if(window.MathJax && window.MathJax.typesetPromise) {
            window.MathJax.typesetPromise();
        }
    }

    // --- MCQ LOGIC ---
    function loadMcq() {
        if(currentMcq >= mcqData.length) {
            finishMcq();
            return;
        }

        const data = mcqData[currentMcq];
        document.getElementById('mcqProgress').textContent = `Î•ÏÏÏ„Î·ÏƒÎ· ${currentMcq + 1} / ${mcqData.length}`;
        document.getElementById('mcqQuestion').innerHTML = data.q;
        document.getElementById('mcqFeedback').className = 'feedback';
        document.getElementById('mcqFeedback').innerHTML = '';
        document.getElementById('mcqNext').disabled = true;
        document.getElementById('mcqNext').textContent = 'Î•Ï€ÏŒÎ¼ÎµÎ½Î¿';
        document.getElementById('mcqNext').onclick = nextMcq; // Reset handler

        const container = document.getElementById('mcqOptions');
        container.innerHTML = '';
        
        data.options.forEach((opt, idx) => {
            const btn = document.createElement('button');
            btn.className = 'option-btn';
            btn.innerHTML = opt;
            btn.onclick = () => checkMcq(btn, idx);
            container.appendChild(btn);
        });

        renderMath();
    }

    function checkMcq(btn, idx) {
        const data = mcqData[currentMcq];
        const allBtns = document.querySelectorAll('.option-btn');
        allBtns.forEach(b => b.disabled = true);

        const feedback = document.getElementById('mcqFeedback');
        
        if(idx === data.correct) {
            btn.classList.add('correct');
            feedback.innerHTML = `<strong>Î£Ï‰ÏƒÏ„Î¬!</strong><br>${data.explanation}`;
            feedback.classList.add('feedback-correct');
        } else {
            btn.classList.add('wrong');
            allBtns[data.correct].classList.add('correct');
            feedback.innerHTML = `<strong>Î›Î¬Î¸Î¿Ï‚.</strong> Î— ÏƒÏ‰ÏƒÏ„Î® Î±Ï€Î¬Î½Ï„Î·ÏƒÎ· ÎµÎ¯Î½Î±Î¹:<br>${data.options[data.correct]}<br><br><em>${data.explanation}</em>`;
            feedback.classList.add('feedback-wrong');
        }
        
        feedback.classList.add('show');
        document.getElementById('mcqNext').disabled = false;
        renderMath();
    }

    function nextMcq() {
        currentMcq++;
        loadMcq();
    }

    function finishMcq() {
        document.getElementById('mcqQuestion').innerHTML = "<h2>Î¤Î­Î»Î¿Ï‚ ÎšÎ¿Ï…Î¯Î¶!</h2>";
        document.getElementById('mcqOptions').innerHTML = "<p>ÎœÏ€ÏÎ¬Î²Î¿! ÎŸÎ»Î¿ÎºÎ»Î®ÏÏ‰ÏƒÎµÏ‚ ÏŒÎ»ÎµÏ‚ Ï„Î¹Ï‚ ÎµÏÏ‰Ï„Î®ÏƒÎµÎ¹Ï‚.</p>";
        document.getElementById('mcqFeedback').className = 'feedback';
        document.getElementById('mcqNext').textContent = "Î•Ï€Î¹ÏƒÏ„ÏÎ¿Ï†Î®";
        document.getElementById('mcqNext').disabled = false;
        document.getElementById('mcqNext').onclick = () => {
            currentMcq = 0;
            loadMcq();
            switchSection('menuSection');
        };
    }

    // --- GAP LOGIC ---
    function loadGap() {
        if(currentGap >= gapData.length) {
            finishGap();
            return;
        }

        const data = gapData[currentGap];
        gapSelection = null;
        gapAnswers = new Array(data.correct.length).fill(null);

        document.getElementById('gapProgress').textContent = `Î†ÏƒÎºÎ·ÏƒÎ· ${currentGap + 1} / ${gapData.length}`;
        document.getElementById('gapFeedback').className = 'feedback';
        document.getElementById('gapCheck').textContent = "ÎˆÎ»ÎµÎ³Ï‡Î¿Ï‚";
        
        // Build Sentence
        let html = data.sentence;
        for(let i=0; i<data.correct.length; i++) {
            html = html.replace(`{${i}}`, `<span class="gap-slot" data-index="${i}" id="slot-${i}"></span>`);
        }
        document.getElementById('gapSentence').innerHTML = html;

        // Build Bank
        const words = [...data.words].sort(() => Math.random() - 0.5);
        const bank = document.getElementById('gapBank');
        bank.innerHTML = '';
        words.forEach(w => {
            const el = document.createElement('div');
            el.className = 'draggable-word';
            el.textContent = w;
            el.onclick = () => selectWord(el, w);
            bank.appendChild(el);
        });

        // Add click listeners to slots
        document.querySelectorAll('.gap-slot').forEach(slot => {
            slot.onclick = () => fillSlot(slot);
        });

        renderMath();
    }

    function selectWord(el, text) {
        if(el.classList.contains('used')) return;
        
        document.querySelectorAll('.draggable-word').forEach(d => d.classList.remove('selected'));
        el.classList.add('selected');
        gapSelection = {el, text};
    }

    function fillSlot(slot) {
        if(!gapSelection) return;

        const idx = slot.dataset.index;
        
        // Restore old word if exists
        if(gapAnswers[idx]) {
            const oldText = gapAnswers[idx];
            document.querySelectorAll('.draggable-word.used').forEach(w => {
                if(w.textContent === oldText) w.classList.remove('used');
            });
        }

        // Fill
        slot.textContent = gapSelection.text;
        slot.classList.add('filled');
        slot.classList.remove('error');
        gapAnswers[idx] = gapSelection.text;

        // Mark used
        gapSelection.el.classList.remove('selected');
        gapSelection.el.classList.add('used');
        gapSelection = null;
    }

    function handleGapAction() {
        const btn = document.getElementById('gapCheck');
        if(btn.textContent === "Î•Ï€ÏŒÎ¼ÎµÎ½Î· Î†ÏƒÎºÎ·ÏƒÎ·") {
            currentGap++;
            loadGap();
            return;
        }

        const data = gapData[currentGap];
        let correctCount = 0;
        let allFilled = true;

        gapAnswers.forEach((ans, i) => {
            const slot = document.getElementById(`slot-${i}`);
            if(!ans) {
                allFilled = false;
                slot.classList.add('error');
            } else if(ans === data.correct[i]) {
                correctCount++;
                slot.style.backgroundColor = "#d1fae5";
                slot.style.borderColor = "#064e3b";
                slot.style.color = "#064e3b";
            } else {
                slot.classList.add('error');
            }
        });

        const feedback = document.getElementById('gapFeedback');
        
        if(!allFilled) {
            feedback.textContent = "Î£Ï…Î¼Ï€Î»Î®ÏÏ‰ÏƒÎµ ÏŒÎ»Î± Ï„Î± ÎºÎµÎ½Î¬!";
            feedback.className = 'feedback feedback-wrong show';
            return;
        }

        if(correctCount === data.correct.length) {
            feedback.innerHTML = "<strong>ÎœÏ€ÏÎ¬Î²Î¿!</strong> Î£Ï‰ÏƒÏ„Î® ÏƒÎµÎ¹ÏÎ¬.";
            feedback.className = 'feedback feedback-correct show';
            btn.textContent = "Î•Ï€ÏŒÎ¼ÎµÎ½Î· Î†ÏƒÎºÎ·ÏƒÎ·";
        } else {
            feedback.innerHTML = `<strong>Î ÏÎ¿ÏƒÏ€Î¬Î¸Î·ÏƒÎµ Î¾Î±Î½Î¬.</strong><br>Hint: ${data.hint}`;
            feedback.className = 'feedback feedback-wrong show';
        }
    }

    function finishGap() {
        document.getElementById('gapSentence').innerHTML = "<h2>Î¤Î­Î»Î¿Ï‚ Î‘ÏƒÎºÎ®ÏƒÎµÏ‰Î½!</h2><p>Î¤Î± Ï€Î®Î³ÎµÏ‚ Ï€ÎµÏÎ¯Ï†Î·Î¼Î±.</p>";
        document.getElementById('gapBank').innerHTML = "";
        document.getElementById('gapFeedback').className = 'feedback';
        document.getElementById('gapCheck').textContent = "Î•Ï€Î¹ÏƒÏ„ÏÎ¿Ï†Î®";
        document.getElementById('gapCheck').onclick = () => {
            currentGap = 0;
            loadGap();
            switchSection('menuSection');
        };
    }

    function renderMath() {
        if(window.MathJax && window.MathJax.typesetPromise) {
            window.MathJax.typesetPromise().catch(err => console.log('MathJax error', err));
        }
    }
</script>

</body>
</html>

