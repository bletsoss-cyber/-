<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz: Νεφρικό Σύστημα</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
        }
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        .glass-card {
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }
        .dark .glass-card {
            background: rgba(30, 41, 59, 0.9);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .nav-btn { transition: all 0.2s ease; }
        .nav-btn.active { ring: 2px; ring-offset: 2px; background-color: #3b82f6 !important; color: white !important; }
        .nav-btn.correct { background-color: #22c55e !important; color: white !important; }
        .nav-btn.wrong { background-color: #ef4444 !important; color: white !important; }
        
        .option-btn { transition: all 0.2s ease; }
        .option-btn:hover:not(:disabled) { border-color: #3b82f6; background-color: #eff6ff; }
        .dark .option-btn:hover:not(:disabled) { background-color: #1e293b; border-color: #3b82f6; }
        
        .correct-opt { background-color: #dcfce7 !important; border-color: #22c55e !important; color: #166534 !important; }
        .wrong-opt { background-color: #fee2e2 !important; border-color: #ef4444 !important; color: #991b1b !important; }
        
        .dark .correct-opt { background-color: #064e3b !important; border-color: #10b981 !important; color: #ecfdf5 !important; }
        .dark .wrong-opt { background-color: #7f1d1d !important; border-color: #ef4444 !important; color: #fef2f2 !important; }

        #nav-grid-container::-webkit-scrollbar { width: 5px; }
        #nav-grid-container::-webkit-scrollbar-track { background: transparent; }
        #nav-grid-container::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
    </style>
</head>
<body class="bg-slate-50 dark:bg-slate-950 text-slate-900 dark:text-slate-100 p-4 md:p-8 flex flex-col items-center min-h-screen">

    <div class="max-w-3xl w-full">
        <header class="flex justify-between items-center mb-6">
            <div>
                <h1 class="text-xl font-black tracking-tight text-blue-600 dark:text-blue-400">Νεφρικό Σύστημα</h1>
                <p class="text-slate-500 dark:text-slate-400 text-xs">Διαδραστική Αξιολόγηση v4.0</p>
            </div>
            
            <div class="flex items-center gap-2">
                <button onclick="toggleDarkMode()" class="p-2.5 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl shadow-sm hover:bg-slate-50 dark:hover:bg-slate-700 transition-all">
                    <svg id="sun-icon" class="h-5 w-5 text-amber-500 hidden" fill="currentColor" viewBox="0 0 20 20"><path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z"/></svg>
                    <svg id="moon-icon" class="h-5 w-5 text-slate-600" fill="currentColor" viewBox="0 0 20 20"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"/></svg>
                </button>

                <button onclick="toggleModal(true)" class="flex items-center gap-2 px-4 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl shadow-sm hover:bg-slate-50 dark:hover:bg-slate-700 transition-all font-bold text-sm">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" /></svg>
                    <span class="hidden sm:inline">Ερωτήσεις</span>
                </button>
            </div>
        </header>

        <main id="quiz-area" class="glass-card bg-white rounded-3xl shadow-xl p-6 md:p-10 min-h-[450px] flex flex-col relative overflow-hidden border border-slate-100">
            <div class="absolute top-0 left-0 w-full h-1.5 bg-slate-100 dark:bg-slate-800">
                <div id="inner-progress" class="h-full bg-blue-500 transition-all duration-500" style="width: 0%"></div>
            </div>

            <div id="question-content">
                <div class="flex justify-between items-center mb-6">
                    <span class="text-blue-600 dark:text-blue-400 font-bold text-xs uppercase tracking-widest">Ερώτηση <span id="current-num">1</span>/<span id="total-num">10</span></span>
                    <span id="score-badge" class="bg-slate-100 dark:bg-slate-800 px-3 py-1 rounded-full text-[10px] font-bold uppercase tracking-tighter">Σκορ: 0</span>
                </div>

                <h2 id="question-text" class="text-lg md:text-xl font-bold mb-8 leading-snug"></h2>
                
                <div id="options-list" class="space-y-3"></div>

                <div id="feedback-box" class="mt-8 p-5 rounded-2xl hidden transform transition-all">
                    <div class="flex gap-4">
                        <div id="feedback-icon" class="flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center text-white text-xs font-bold"></div>
                        <div>
                            <h4 id="feedback-title" class="font-bold mb-1 text-[10px] uppercase tracking-wide"></h4>
                            <p id="feedback-msg" class="text-sm leading-relaxed"></p>
                        </div>
                    </div>
                </div>
            </div>

            <button id="next-btn" onclick="goToNext()" class="mt-8 w-full md:w-auto md:ml-auto px-8 py-3.5 bg-slate-900 dark:bg-blue-600 text-white rounded-xl font-bold hover:opacity-90 transition-all shadow-lg hidden">
                Επόμενη Ερώτηση
            </button>

            <div id="result-screen" class="hidden flex-col items-center justify-center h-full py-10 text-center">
                <div class="w-20 h-20 bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-full flex items-center justify-center text-3xl mb-4 mx-auto">🏆</div>
                <h2 class="text-3xl font-black mb-2">Ολοκλήρωση!</h2>
                <p class="text-slate-500 dark:text-slate-400 mb-8">Ολοκληρώσατε την αξιολόγηση του νεφρικού συστήματος.</p>
                
                <div class="grid grid-cols-2 gap-4 w-full max-w-xs mb-8 mx-auto">
                    <div class="bg-slate-50 dark:bg-slate-800/50 p-4 rounded-2xl">
                        <div class="text-[9px] font-bold text-slate-400 uppercase mb-1 text-center">Σκορ</div>
                        <div class="text-2xl font-black text-center"><span id="final-score">0</span>/<span id="final-total">0</span></div>
                    </div>
                    <div class="bg-slate-50 dark:bg-slate-800/50 p-4 rounded-2xl">
                        <div class="text-[9px] font-bold text-slate-400 uppercase mb-1 text-center">Ποσοστό</div>
                        <div class="text-2xl font-black text-blue-600 text-center"><span id="final-pct">0</span>%</div>
                    </div>
                </div>

                <button onclick="restartQuiz()" class="px-10 py-4 bg-blue-600 text-white rounded-2xl font-bold hover:bg-blue-700 transition-all shadow-xl">
                    Επανεκκίνηση
                </button>
            </div>
        </main>
    </div>

    <!-- Navigation Modal -->
    <div id="nav-modal" class="hidden fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-950/80 backdrop-blur-sm">
        <div class="glass-card bg-white dark:bg-slate-900 w-full max-w-md rounded-3xl shadow-2xl overflow-hidden">
            <div class="p-6 border-b border-slate-100 dark:border-slate-800 flex justify-between items-center">
                <h3 class="font-bold">Πλοήγηση Ερωτήσεων</h3>
                <button onclick="toggleModal(false)" class="p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                </button>
            </div>
            <div id="nav-grid-container" class="p-6 max-h-[60vh] overflow-y-auto bg-slate-50/30 dark:bg-slate-900/30">
                <div id="nav-grid" class="grid grid-cols-5 gap-3"></div>
            </div>
            <div class="p-4 text-center">
                <button onclick="toggleModal(false)" class="text-blue-600 dark:text-blue-400 font-bold text-sm">Επιστροφή στο Quiz</button>
            </div>
        </div>
    </div>

    <script>
        const quizData = [
            { 
                q: "Ποιες είναι οι τρεις πρωταρχικές κατηγορίες λειτουργιών των νεφρών;", 
                options: ["Ομοιοστατική, Απεκκριτική και Ενδοκρινική", "Αναπνευστική, Πεπτική και Κυκλοφορική", "Κινητική, Αισθητική και Μεταβολική", "Διηθητική, Αποθηκευτική και Θερμορυθμιστική"], 
                correct: 0, 
                reason: "Αυτές οι τρεις κατηγορίες συνοψίζουν τη ρύθμιση του εσωτερικού περιβάλλοντος, την αποβολή ουσιών και την παραγωγή ορμονών." 
            },
            { 
                q: "Ποιο από τα παρακάτω μεταβολικά προϊόντα απεκκρίνεται από τους νεφρούς;", 
                options: ["Γλυκόζη", "Κρεατινίνη", "Γλυκογόνο", "Ινσουλίνη"], 
                correct: 1, 
                reason: "Η κρεατινίνη είναι ένα από τα κύρια τελικά προϊόντα του μεταβολισμού που αποβάλλεται μέσω των ούρων." 
            },
            { 
                q: "Ποια ορμόνη εκκρίνουν οι νεφροί για τη ρύθμιση της παραγωγής ερυθρών αιμοσφαιρίων;", 
                options: ["Ρενίνη", "Ερυθροποιητίνη", "Ινσουλίνη", "Αδρεναλίνη"], 
                correct: 1, 
                reason: "Η ερυθροποιητίνη διεγείρει τον μυελό των οστών για την παραγωγή ερυθρών αιμοσφαιρίων." 
            },
            { 
                q: "Η ρύθμιση της οξεοβασικής ισορροπίας εμπίπτει σε ποια λειτουργία;", 
                options: ["Ενδοκρινική", "Ομοιοστατική", "Απεκκριτική", "Μεταβολική"], 
                correct: 1, 
                reason: "Η ομοιοστατική λειτουργία αφορά τη διατήρηση σταθερών συνθηκών στο εσωτερικό περιβάλλον, όπως το pH." 
            },
            { 
                q: "Πού πραγματοποιείται η διαδικασία της διήθησης;", 
                options: ["Στα περισωληναριακά τριχοειδή", "Στο σπείραμα", "Στη νεφρική φλέβα", "Στα απαγωγά αρτηρίδια"], 
                correct: 1, 
                reason: "Το σπείραμα είναι το δίκτυο τριχοειδών όπου το πλάσμα διηθείται προς την κάψα του Bowman." 
            },
            { 
                q: "Ποια είναι η θεμελιώδη εξίσωση του νεφρού;", 
                options: ["Απέκκριση = Διήθηση + Επαναρρόφηση - Έκκριση", "Απέκκριση = Διήθηση - Επαναρρόφηση + Έκκριση", "Απέκκριση = Διήθηση + Έκκριση", "Απέκκριση = Επαναρρόφηση - Διήθηση"], 
                correct: 1, 
                reason: "Η απεκκρινόμενη ποσότητα ισούται με τη διηθημένη μείον την επαναρροφημένη συν την εκκρινόμενη." 
            },
            { 
                q: "Τι ονομάζουμε 'Έκκριση' στη νεφρική λειτουργία;", 
                options: ["Τη μεταφορά ουσιών από την κάψα του Bowman στα σωληνάρια", "Τη μεταφορά ουσιών από τα περισωληναριακά τριχοειδή προς τα σωληνάρια", "Την αποβολή των ούρων", "Την επιστροφή γλυκόζης στο αίμα"], 
                correct: 1, 
                reason: "Έκκριση είναι η μεταφορά ουσιών από το αίμα των τριχοειδών απευθείας προς το εσωτερικό των σωληναρίων." 
            },
            { 
                q: "Ποια από τις παρακάτω ορμόνες αποδομείται (καταβολίζεται) στους νεφρούς;", 
                options: ["Γλουκαγόνο", "Τεστοστερόνη", "Θυροξίνη", "Οιστρογόνα"], 
                correct: 0, 
                reason: "Οι νεφροί συμμετέχουν στην αποδόμηση πεπτιδίων όπως η ινσουλίνη και το γλουκαγόνο." 
            },
            { 
                q: "Σε ποια μεταβολική διεργασία συμμετέχουν οι νεφροί;", 
                options: ["Γλυκογονόλυση", "Νεογλυκογένεση", "Πρωτεϊνοσύνθεση", "Λιπόλυση"], 
                correct: 1, 
                reason: "Οι νεφροί συμμετέχουν στο μεταβολισμό των αμινοξέων μέσω της διαδικασίας της νεογλυκογένεσης." 
            },
            { 
                q: "Ποιο συστατικό του αίματος διηθείται στο σπείραμα σε φυσιολογικές συνθήκες;", 
                options: ["Τα ερυθρά αιμοσφαίρια", "Τα λευκά αιμοσφαίρια", "Ένα μέρος του πλάσματος", "Τα αιμοπετάλια"], 
                correct: 2, 
                reason: "Στο σπείραμα διηθείται ένα μέρος του πλάσματος, καθώς τα έμμορφα συστατικά είναι πολύ μεγάλα για να διηθηθούν." 
            },
            { 
                q: "Ποιο στοιχείο του σπειραματικού ηθμού ευθύνεται για την 100 φορές μεγαλύτερη διαπερατότητα σε σχέση με τα κοινά τριχοειδή;", 
                options: ["Τα ποδοκύτταρα", "Η βασική μεμβράνη", "Οι θυρίδες (fenestrations) των ενδοθηλιακών κυττάρων", "Τα μεσαγγειακά κύτταρα"], 
                correct: 2, 
                reason: "Οι θυρίδες και οι πόροι των ενδοθηλιακών κυττάρων καθιστούν τη στιβάδα αυτή εξαιρετικά διαπερατή." 
            },
            { 
                q: "Γιατί οι πρωτεΐνες του πλάσματος, όπως η λευκωματίνη, δεν διηθούνται φυσιολογικά;", 
                options: ["Λόγω σχήματος", "Επειδή απωθούνται από τα αρνητικά φορτία της βασικής μεμβράνης", "Λόγω υπερβολικά υψηλής υδροστατικής πίεσης", "Λόγω των ποδοκυττάρων"], 
                correct: 1, 
                reason: "Η βασική μεμβράνη φέρει αρνητικά φορτία που απωθούν τις αρνητικά φορτισμένες πρωτεΐνες." 
            },
            { 
                q: "Πώς επηρεάζουν τα μεσαγγειακά κύτταρα τον GFR;", 
                options: ["Εκκρίνουν ορμόνες", "Αυξάνουν την πίεση στην κάψα", "Μεταβάλλουν τη συνολική επιφάνεια διήθησης μέσω συστολής", "Φιλτράρουν τις πρωτεΐνες"], 
                correct: 2, 
                reason: "Όταν συστέλλονται, αλλάζει η συνολική επιφάνεια που είναι διαθέσιμη για υπερδιήθηση." 
            },
            { 
                q: "Ποια είναι η συγκέντρωση ουσιών με μικρό μοριακό βάρος (<5500 Da) στο σπειραματικό διήθημα;", 
                options: ["Μηδενική", "Διπλάσια από το πλάσμα", "Ίδια με τη συγκέντρωση στο πλάσμα", "Το 20% της συγκέντρωσης του πλάσματος"], 
                correct: 2, 
                reason: "Μικρά μόρια όπως το νερό, η γλυκόζη και η ουρία διέρχονται ελεύθερα από τον ηθμό." 
            },
            { 
                q: "Αν PG=55, PB=15 και πG=30, ποια είναι η καθαρή πίεση διήθησης;", 
                options: ["10 mmHg", "25 mmHg", "40 mmHg", "5 mmHg"], 
                correct: 0, 
                reason: "Προκύπτει από τον τύπο: 55 - (15 + 30) = 10 mmHg." 
            },
            { 
                q: "Γιατί η κολλοειδωσμωτική πίεση της κάψας Bowman (πB) είναι φυσιολογικά μηδενική;", 
                options: ["Γιατί δεν υπάρχει υγρό", "Γιατί οι πρωτεΐνες δεν διαπερνούν τον ηθμό", "Λόγω χαμηλής θερμοκρασίας", "Λόγω της παρουσίας γλυκόζης"], 
                correct: 1, 
                reason: "Οι πρωτεΐνες δεν περνούν στον χώρο της κάψας, άρα δεν δημιουργούν κολλοειδωσμωτική πίεση εκεί." 
            },
            { 
                q: "Πώς μεταβάλλεται η κολλοειδωσμωτική πίεση (πG) καθώς το αίμα ρέει προς το απαγωγό αρτηρίδιο;", 
                options: ["Μειώνεται", "Παραμένει σταθερή", "Αυξάνεται", "Μηδενίζεται"], 
                correct: 2, 
                reason: "Η διήθηση του υγρού αυξάνει τη συγκέντρωση των πρωτεϊνών που παραμένουν στα τριχοειδή." 
            },
            { 
                q: "Πόσα λίτρα πλάσματος διηθούνται συνολικά το 24ωρο στους νεφρούς;", 
                options: ["1,5 λίτρα", "180 λίτρα", "600 λίτρα", "5 λίτρα"], 
                correct: 1, 
                reason: "Ο GFR είναι ~125ml/min, που αντιστοιχεί σε 180 λίτρα την ημέρα." 
            },
            { 
                q: "Τι ορίζεται ως κλάσμα διήθησης (filtration fraction);", 
                options: ["GFR / RPF", "RPF / GFR", "GFR x RPF", "BP / GFR"], 
                correct: 0, 
                reason: "Είναι το ποσοστό της νεφρικής ροής πλάσματος που διηθείται στο σπείραμα (φυσιολογικά ~20%)." 
            },
            { 
                q: "Ποιος από τους παρακάτω παράγοντες ΔΕΝ αποτελεί κριτήριο διαπερατότητας του ηθμού;", 
                options: ["Μοριακό βάρος", "Μοριακή ακτίνα", "Ηλεκτρικό φορτίο", "Συγκέντρωση οξυγόνου"], 
                correct: 3, 
                reason: "Η διαπερατότητα καθορίζεται από φυσικοχημικές ιδιότητες του μορίου (Βάρος, Ακτίνα, Φορτίο, Σχήμα)." 
            }
        ];

        let state = {
            currentQ: 0,
            answers: Array(quizData.length).fill(null),
            results: Array(quizData.length).fill(null),
            score: 0
        };

        function toggleDarkMode() {
            const isDark = document.documentElement.classList.toggle('dark');
            document.getElementById('sun-icon').classList.toggle('hidden', !isDark);
            document.getElementById('moon-icon').classList.toggle('hidden', isDark);
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
        }

        function toggleModal(show) {
            document.getElementById('nav-modal').classList.toggle('hidden', !show);
        }

        function initNav() {
            const navGrid = document.getElementById('nav-grid');
            navGrid.innerHTML = '';
            quizData.forEach((_, i) => {
                const btn = document.createElement('button');
                btn.id = `nav-${i}`;
                btn.className = "nav-btn h-10 w-full rounded-lg font-bold text-xs flex items-center justify-center bg-slate-100 dark:bg-slate-800 text-slate-400";
                btn.innerText = i + 1;
                btn.onclick = () => { jumpToQuestion(i); toggleModal(false); };
                navGrid.appendChild(btn);
            });
            document.getElementById('total-num').innerText = quizData.length;
            updateNavUI();
        }

        function updateNavUI() {
            quizData.forEach((_, i) => {
                const btn = document.getElementById(`nav-${i}`);
                if (!btn) return;
                btn.className = "nav-btn h-10 w-full rounded-lg font-bold text-xs flex items-center justify-center ";
                if (state.currentQ === i) btn.classList.add('active');
                else if (state.results[i] === true) btn.classList.add('correct');
                else if (state.results[i] === false) btn.classList.add('wrong');
                else btn.classList.add('bg-slate-100', 'dark:bg-slate-800', 'text-slate-400');
            });

            const answered = state.results.filter(r => r !== null).length;
            const pct = (answered / quizData.length) * 100;
            document.getElementById('inner-progress').style.width = `${pct}%`;
            document.getElementById('score-badge').innerText = `Σκορ: ${state.score}`;
        }

        function renderQuestion() {
            const data = quizData[state.currentQ];
            document.getElementById('current-num').innerText = state.currentQ + 1;
            document.getElementById('question-text').innerText = data.q;
            const optionsList = document.getElementById('options-list');
            const feedbackBox = document.getElementById('feedback-box');
            const nextBtn = document.getElementById('next-btn');
            
            optionsList.innerHTML = '';
            feedbackBox.classList.add('hidden');
            nextBtn.classList.add('hidden');

            data.options.forEach((opt, i) => {
                const btn = document.createElement('button');
                btn.className = "option-btn w-full text-left p-4 rounded-xl border border-slate-200 dark:border-slate-700 text-sm font-medium bg-white dark:bg-slate-800 shadow-sm flex items-center gap-3";
                btn.innerHTML = `<div class="w-6 h-6 rounded-full border border-slate-200 dark:border-slate-600 flex-shrink-0 flex items-center justify-center text-[10px] font-bold">${i+1}</div> <span>${opt}</span>`;
                
                if (state.results[state.currentQ] !== null) {
                    btn.disabled = true;
                    if (i === data.correct) btn.classList.add('correct-opt');
                    if (i === state.answers[state.currentQ] && i !== data.correct) btn.classList.add('wrong-opt');
                } else {
                    btn.onclick = () => checkAnswer(i);
                }
                optionsList.appendChild(btn);
            });

            if (state.results[state.currentQ] !== null) {
                showFeedback(state.results[state.currentQ]);
                nextBtn.classList.remove('hidden');
            }
        }

        function checkAnswer(idx) {
            if (state.results[state.currentQ] !== null) return;
            const isCorrect = (idx === quizData[state.currentQ].correct);
            state.answers[state.currentQ] = idx;
            state.results[state.currentQ] = isCorrect;
            if (isCorrect) state.score++;
            updateNavUI();
            renderQuestion();
        }

        function showFeedback(isCorrect) {
            const feedbackBox = document.getElementById('feedback-box');
            const data = quizData[state.currentQ];
            feedbackBox.classList.remove('hidden');

            const icon = document.getElementById('feedback-icon');
            const title = document.getElementById('feedback-title');
            const msg = document.getElementById('feedback-msg');

            if (isCorrect) {
                feedbackBox.className = "mt-6 p-4 rounded-xl bg-green-50 dark:bg-green-900/20 border border-green-100 dark:border-green-800 text-green-800 dark:text-green-200";
                icon.className = "flex-shrink-0 w-8 h-8 rounded-full bg-green-500 text-white flex items-center justify-center";
                icon.innerHTML = "✓";
                title.innerText = "Σωστή Απάντηση";
            } else {
                feedbackBox.className = "mt-6 p-4 rounded-xl bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-800 text-red-800 dark:text-red-200";
                icon.className = "flex-shrink-0 w-8 h-8 rounded-full bg-red-500 text-white flex items-center justify-center";
                icon.innerHTML = "✕";
                title.innerText = "Λάθος Απάντηση";
            }
            msg.innerText = data.reason || "Δεν υπάρχει διαθέσιμη επεξήγηση.";
            
            const nextBtn = document.getElementById('next-btn');
            nextBtn.innerText = (state.currentQ < quizData.length - 1) ? "Επόμενη Ερώτηση" : "Δείτε τα Αποτελέσματα";
        }

        function goToNext() {
            if (state.currentQ < quizData.length - 1) {
                state.currentQ++;
                renderQuestion();
                updateNavUI();
            } else {
                showFinalScreen();
            }
        }

        function jumpToQuestion(i) {
            state.currentQ = i;
            renderQuestion();
            updateNavUI();
        }

        function showFinalScreen() {
            document.getElementById('question-content').classList.add('hidden');
            document.getElementById('next-btn').classList.add('hidden');
            const screen = document.getElementById('result-screen');
            screen.classList.remove('hidden');
            screen.classList.add('flex');
            document.getElementById('final-score').innerText = state.score;
            document.getElementById('final-total').innerText = quizData.length;
            document.getElementById('final-pct').innerText = Math.round((state.score / quizData.length) * 100);
        }

        function restartQuiz() {
            state = { 
                currentQ: 0, 
                answers: Array(quizData.length).fill(null), 
                results: Array(quizData.length).fill(null), 
                score: 0 
            };
            document.getElementById('question-content').classList.remove('hidden');
            document.getElementById('result-screen').classList.add('hidden');
            initNav();
            renderQuestion();
        }

        // Initialize Theme from LocalStorage
        if (localStorage.getItem('theme') === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark');
            document.getElementById('sun-icon').classList.remove('hidden');
            document.getElementById('moon-icon').classList.add('hidden');
        }

        // Start App
        initNav();
        renderQuestion();
    </script>
</body>
</html>
