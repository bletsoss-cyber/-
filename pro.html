<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ŒëŒùŒëŒ§ŒüŒúŒôŒë II - HARD MODE</title>
    <style>
        :root {
            --bg-color: #f4f6f8;
            --card-bg: #ffffff;
            --text-primary: #2c3e50;
            --text-secondary: #636e72;
            --accent: #2d3436; /* Œ†ŒπŒø œÉŒøŒ≤Œ±œÅœå œáœÅœéŒºŒ± */
            --success: #00b894;
            --error: #d63031;
            --border: #dfe6e9;
            --shadow: 0 4px 15px rgba(0,0,0,0.05);
        }

        body.dark-mode {
            --bg-color: #121212;
            --card-bg: #1e1e1e;
            --text-primary: #e0e0e0;
            --text-secondary: #a0a0a0;
            --accent: #74b9ff;
            --success: #00c853;
            --error: #ff5252;
            --border: #333333;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-primary);
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            transition: all 0.3s ease;
        }

        .header {
            width: 100%; max-width: 800px; padding: 20px;
            display: flex; justify-content: space-between; align-items: center;
        }
        .controls { display: flex; gap: 10px; }
        .btn-control {
            background: var(--card-bg); border: 1px solid var(--border); color: var(--text-primary);
            padding: 8px 12px; border-radius: 8px; cursor: pointer; font-weight: 600;
        }

        .quiz-card {
            background: var(--card-bg); width: 90%; max-width: 700px; padding: 30px;
            border-radius: 20px; box-shadow: var(--shadow); border: 1px solid var(--border);
            margin-bottom: 20px; position: relative;
        }

        .progress-bar {
            width: 100%; height: 6px; background: var(--border); border-radius: 3px; margin-bottom: 20px;
        }
        .progress-fill { height: 100%; background: var(--success); width: 0%; transition: width 0.3s ease; }

        .meta-info { display: flex; justify-content: space-between; font-size: 0.9rem; color: var(--text-secondary); margin-bottom: 15px; }
        
        .badge {
            display: inline-block; padding: 4px 10px; border-radius: 4px;
            font-size: 0.75rem; font-weight: bold; margin-bottom: 15px; text-transform: uppercase; letter-spacing: 1px;
        }
        .badge-artery { background: #ffebee; color: #c62828; }
        .badge-vein { background: #e3f2fd; color: #1565c0; }
        .badge-muscle { background: #f9fbe7; color: #827717; }
        .badge-organ { background: #e0f2f1; color: #00695c; }

        .question-text { font-size: 1.3rem; font-weight: 700; margin-bottom: 25px; line-height: 1.4; }

        .options-grid { display: grid; gap: 10px; }
        .option-btn {
            background: transparent; border: 2px solid var(--border); color: var(--text-primary);
            padding: 15px 20px; border-radius: 10px; text-align: left; font-size: 1rem;
            cursor: pointer; transition: all 0.2s; position: relative;
        }
        .option-btn:hover:not(:disabled) { border-color: var(--text-primary); background: rgba(0,0,0,0.02); }
        .option-btn:disabled { cursor: default; opacity: 1; } /* Keep opacity high to read answers */

        .option-btn.correct-answer { background: var(--success) !important; color: white !important; border-color: var(--success) !important; }
        .option-btn.wrong-answer { background: var(--error) !important; color: white !important; border-color: var(--error) !important; }

        .footer-nav { display: flex; justify-content: space-between; width: 90%; max-width: 700px; margin-bottom: 30px; }
        .nav-arrow {
            padding: 12px 25px; border: none; background: var(--accent); color: white;
            border-radius: 8px; cursor: pointer; font-weight: bold; opacity: 0.9;
        }
        .nav-arrow:disabled { opacity: 0.3; cursor: not-allowed; }

        /* Modal Styles */
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 999; justify-content: center; align-items: center; }
        .modal-content { background: var(--card-bg); width: 90%; max-width: 600px; max-height: 80vh; padding: 20px; border-radius: 15px; overflow-y: auto; }
        .nav-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(40px, 1fr)); gap: 8px; margin-top: 20px; }
        .nav-item { 
            height: 40px; display: flex; justify-content: center; align-items: center; 
            border: 1px solid var(--border); border-radius: 6px; cursor: pointer; font-size: 0.9rem;
        }
        .nav-item.correct { background: var(--success); color: white; border: none; }
        .nav-item.wrong { background: var(--error); color: white; border: none; }
        .nav-item.active { border: 2px solid var(--text-primary); }

    </style>
</head>
<body>

    <div class="header">
        <h1>Anatomy <span style="color:var(--error)">Hard</span></h1>
        <div class="controls">
            <button class="btn-control" onclick="toggleNav()">üó∫Ô∏è</button>
            <button class="btn-control" onclick="document.body.classList.toggle('dark-mode')">üåì</button>
        </div>
    </div>

    <div class="quiz-card">
        <div class="progress-bar"><div id="progress-fill" class="progress-fill"></div></div>
        
        <div class="meta-info">
            <span id="q-counter"></span>
            <span id="score-counter"></span>
        </div>

        <span id="badge" class="badge"></span>
        <div id="question" class="question-text"></div>
        
        <div id="options" class="options-grid"></div>
    </div>

    <div class="footer-nav">
        <button id="prev-btn" class="nav-arrow" onclick="prevQ()">Previous</button>
        <button id="next-btn" class="nav-arrow" onclick="nextQ()">Next</button>
    </div>

    <div id="navModal" class="modal" onclick="if(event.target === this) toggleNav()">
        <div class="modal-content">
            <h3>Œ†ŒªŒøŒÆŒ≥Œ∑œÉŒ∑ ŒïœÅœâœÑŒÆœÉŒµœâŒΩ</h3>
            <div id="nav-grid" class="nav-grid"></div>
        </div>
    </div>

<script>
    // --- DATABASE WITH TRICKY DISTRACTORS ---
    // 'a' is the correct answer. 'o' includes plausible wrong answers (distractors).
    const database = [
        // --- ŒëŒ°Œ§ŒóŒ°ŒôŒïŒ£ ---
        {
            q: "ŒëœÄœå œÄŒøœç ŒµŒ∫œÜœçŒµœÑŒ±Œπ Œ∑ ŒïœÄŒπœÄŒøŒªŒÆœÇ ŒöœÅŒøœÑŒ±œÜŒπŒ∫ŒÆ Œ±œÅœÑŒ∑œÅŒØŒ±;", 
            a: "ŒàŒæœâ ŒöŒ±œÅœâœÑŒØŒ¥Œ±", 
            o: ["ŒàŒæœâ ŒöŒ±œÅœâœÑŒØŒ¥Œ±", "ŒàœÉœâ ŒöŒ±œÅœâœÑŒØŒ¥Œ±", "Œ†œÅŒøœÉœâœÄŒπŒ∫ŒÆ", "ŒàœÉœâ ŒìŒΩŒ±Œ∏ŒπŒ±ŒØŒ±"], 
            t: "artery"
        },
        {
            q: "ŒëœÄœå œÄŒøœç ŒµŒ∫œÜœçŒµœÑŒ±Œπ Œ∑ ŒúŒ≠œÉŒ∑ ŒúŒ∑ŒΩŒπŒ≥Œ≥ŒπŒ∫ŒÆ Œ±œÅœÑŒ∑œÅŒØŒ±;", 
            a: "ŒàœÉœâ ŒìŒΩŒ±Œ∏ŒπŒ±ŒØŒ±", 
            o: ["ŒàœÉœâ ŒìŒΩŒ±Œ∏ŒπŒ±ŒØŒ±", "ŒàŒæœâ ŒìŒΩŒ±Œ∏ŒπŒ±ŒØŒ±", "ŒúŒ≠œÉŒ∑ ŒïŒ≥Œ∫ŒµœÜŒ±ŒªŒπŒ∫ŒÆ", "ŒïœÄŒπœÄŒøŒªŒÆœÇ ŒöœÅŒøœÑŒ±œÜŒπŒ∫ŒÆ"], 
            t: "artery"
        },
        {
            q: "Œ†ŒøŒπŒ± Œ±œÅœÑŒ∑œÅŒØŒ± ŒµŒØŒΩŒ±Œπ Œ∫ŒªŒ¨Œ¥ŒøœÇ œÑŒ∑œÇ Œ•œÄŒøŒ∫ŒªŒµŒØŒ¥ŒπŒ±œÇ;", 
            a: "Œ£œÄŒøŒΩŒ¥œÖŒªŒπŒ∫ŒÆ", 
            o: ["Œ£œÄŒøŒΩŒ¥œÖŒªŒπŒ∫ŒÆ", "ŒöŒøŒπŒΩŒÆ ŒöŒ±œÅœâœÑŒØŒ¥Œ±", "ŒëŒΩœéœÑŒ±œÑŒ∑ ŒòœâœÅŒ±Œ∫ŒπŒ∫ŒÆ", "Œ•œÄŒøœÄŒªŒ¨œÑŒπŒ±"], 
            t: "artery"
        },
        {
            q: "Œó ŒöŒ¨œÑœâ ŒïœÄŒπŒ≥Œ¨œÉœÑœÅŒπŒ± Œ±œÅœÑŒ∑œÅŒØŒ± ŒµŒ∫œÜœçŒµœÑŒ±Œπ Œ±œÄœå œÑŒ∑ŒΩ:", 
            a: "ŒàŒæœâ ŒõŒ±Œ≥œåŒΩŒπŒ±", 
            o: ["ŒàŒæœâ ŒõŒ±Œ≥œåŒΩŒπŒ±", "ŒàœÉœâ ŒõŒ±Œ≥œåŒΩŒπŒ±", "ŒúŒ∑œÅŒπŒ±ŒØŒ±", "ŒïœÄŒπœÄŒøŒªŒÆœÇ ŒïœÄŒπŒ≥Œ¨œÉœÑœÅŒπŒ±"], 
            t: "artery"
        },
        {
            q: "ŒëœÄœå œÄŒøœç œÄœÅŒøŒ≠œÅœáŒµœÑŒ±Œπ Œ∑ ŒìŒ±œÉœÑœÅŒøŒ¥œâŒ¥ŒµŒ∫Œ±Œ¥Œ±Œ∫œÑœÖŒªŒπŒ∫ŒÆ;", 
            a: "ŒöŒøŒπŒªŒπŒ±Œ∫ŒÆ ŒëœÅœÑŒ∑œÅŒØŒ± (ŒóœÄŒ±œÑŒπŒ∫ŒÆ)", 
            o: ["ŒöŒøŒπŒªŒπŒ±Œ∫ŒÆ ŒëœÅœÑŒ∑œÅŒØŒ± (ŒóœÄŒ±œÑŒπŒ∫ŒÆ)", "ŒÜŒΩœâ ŒúŒµœÉŒµŒΩœÑŒ≠œÅŒπŒ±", "Œ£œÄŒªŒ∑ŒΩŒπŒ∫ŒÆ", "ŒëœÅŒπœÉœÑŒµœÅŒÆ ŒìŒ±œÉœÑœÅŒπŒ∫ŒÆ"], 
            t: "artery"
        },
        {
            q: "Œó ŒöŒ¨œÑœâ Œ¶œÅŒµŒΩŒπŒ∫ŒÆ Œ±œÅœÑŒ∑œÅŒØŒ± ŒµŒ∫œÜœçŒµœÑŒ±Œπ Œ±œÄœå:", 
            a: "ŒöŒøŒπŒªŒπŒ±Œ∫ŒÆ ŒëŒøœÅœÑŒÆ", 
            o: ["ŒöŒøŒπŒªŒπŒ±Œ∫ŒÆ ŒëŒøœÅœÑŒÆ", "ŒòœâœÅŒ±Œ∫ŒπŒ∫ŒÆ ŒëŒøœÅœÑŒÆ", "ŒöŒøŒπŒªŒπŒ±Œ∫ŒÆ ŒëœÅœÑŒ∑œÅŒØŒ±", "ŒùŒµœÜœÅŒπŒ∫ŒÆ"], 
            t: "artery"
        },
        {
            q: "Œ†ŒøŒπŒøœÇ ŒµŒØŒΩŒ±Œπ Œ∫ŒªŒ¨Œ¥ŒøœÇ œÑŒ∑œÇ ŒúŒ±œÉœáŒ±ŒªŒπŒ±ŒØŒ±œÇ;", 
            a: "Œ•œÄŒøœÄŒªŒ¨œÑŒπŒ±", 
            o: ["Œ•œÄŒøœÄŒªŒ¨œÑŒπŒ±", "Œ•œÄŒµœÅœÄŒªŒ¨œÑŒπŒ±", "ŒïŒ≥Œ∫Œ¨œÅœÉŒπŒ± Œ§œÅŒ±œáŒ∑ŒªŒπŒ∫ŒÆ", "ŒëŒΩŒπŒøœçœÉŒ± ŒëœÖœáŒµŒΩŒπŒ∫ŒÆ"], 
            t: "artery"
        },
        {
            q: "ŒëœÄœå œÄŒøœç ŒµŒ∫œÜœçŒµœÑŒ±Œπ Œ∑ ŒòœâœÅŒ±Œ∫ŒøœÅœÅŒ±œáŒπŒ±ŒØŒ±;", 
            a: "Œ•œÄŒøœÄŒªŒ¨œÑŒπŒ±", 
            o: ["Œ•œÄŒøœÄŒªŒ¨œÑŒπŒ±", "ŒúŒ±œÉœáŒ±ŒªŒπŒ±ŒØŒ±", "Œ•œÄŒµœÅœÄŒªŒ¨œÑŒπŒ±", "Œ°Œ±œáŒπŒ±ŒØŒ± œÑŒ∑œÇ Œ©ŒºŒøœÄŒªŒ¨œÑŒ∑œÇ"], 
            t: "artery"
        },
        {
            q: "Œó Œ†ŒµœÅŒπŒ∫Œ±œÅŒ¥ŒπŒ±Œ∫ŒÆ Œ±œÅœÑŒ∑œÅŒØŒ± ŒµŒØŒΩŒ±Œπ Œ∫ŒªŒ¨Œ¥ŒøœÇ œÑŒ∑œÇ:", 
            a: "ŒòœâœÅŒ±Œ∫ŒπŒ∫ŒÆœÇ ŒëŒøœÅœÑŒÆœÇ", 
            o: ["ŒòœâœÅŒ±Œ∫ŒπŒ∫ŒÆœÇ ŒëŒøœÅœÑŒÆœÇ", "ŒëŒΩŒπŒøœçœÉŒ±œÇ ŒëŒøœÅœÑŒÆœÇ", "Œ†ŒΩŒµœÖŒºŒøŒΩŒπŒ∫ŒÆœÇ", "ŒàœÉœâ ŒòœâœÅŒ±Œ∫ŒπŒ∫ŒÆœÇ"], 
            t: "artery"
        },
        {
            q: "Œó Œ†ŒµœÅŒøŒΩŒπŒ±ŒØŒ± Œ±œÅœÑŒ∑œÅŒØŒ± ŒµŒØŒΩŒ±Œπ Œ∫ŒªŒ¨Œ¥ŒøœÇ œÑŒ∑œÇ:", 
            a: "ŒüœÄŒØœÉŒ∏ŒπŒ±œÇ ŒöŒΩŒ∑ŒºŒπŒ±ŒØŒ±œÇ", 
            o: ["ŒüœÄŒØœÉŒ∏ŒπŒ±œÇ ŒöŒΩŒ∑ŒºŒπŒ±ŒØŒ±œÇ", "Œ†œÅœåœÉŒ∏ŒπŒ±œÇ ŒöŒΩŒ∑ŒºŒπŒ±ŒØŒ±œÇ", "ŒôŒ≥ŒΩœÖŒ±Œ∫ŒÆœÇ", "ŒúŒ∑œÅŒπŒ±ŒØŒ±œÇ"], 
            t: "artery"
        },
        {
            q: "ŒëœÄœå œÄŒøœç ŒµŒ∫œÜœçŒµœÑŒ±Œπ Œ∑ ŒÜŒΩœâ ŒòœÖœÅŒµŒøŒµŒπŒ¥ŒÆœÇ;", 
            a: "ŒàŒæœâ ŒöŒ±œÅœâœÑŒØŒ¥Œ±", 
            o: ["ŒàŒæœâ ŒöŒ±œÅœâœÑŒØŒ¥Œ±", "ŒàœÉœâ ŒöŒ±œÅœâœÑŒØŒ¥Œ±", "ŒòœÖœÅŒµŒøŒ±œÖœáŒµŒΩŒπŒ∫œå œÉœÑŒ≠ŒªŒµœáŒøœÇ", "ŒöŒ¨œÑœâ ŒòœÖœÅŒµŒøŒµŒπŒ¥ŒÆœÇ"], 
            t: "artery"
        },
        {
            q: "Œó ŒöŒøŒπŒΩŒÆ ŒúŒµœÉœåœÉœÑŒµŒøœÇ Œ±œÅœÑŒ∑œÅŒØŒ± œÄœÅŒøŒ≠œÅœáŒµœÑŒ±Œπ Œ±œÄœå œÑŒ∑ŒΩ:", 
            a: "Œ©ŒªŒ≠ŒΩŒπŒ±", 
            o: ["Œ©ŒªŒ≠ŒΩŒπŒ±", "ŒöŒµœÅŒ∫ŒπŒ¥ŒπŒ∫ŒÆ", "ŒíœÅŒ±œáŒπœåŒΩŒπŒ±", "ŒúŒ≠œÉŒ∑"], 
            t: "artery"
        },
        {
            q: "Œó Œ£œÄŒªŒ∑ŒΩŒπŒ∫ŒÆ Œ±œÅœÑŒ∑œÅŒØŒ± ŒµŒØŒΩŒ±Œπ Œ∫ŒªŒ¨Œ¥ŒøœÇ œÑŒ∑œÇ:", 
            a: "ŒöŒøŒπŒªŒπŒ±Œ∫ŒÆœÇ ŒëœÅœÑŒ∑œÅŒØŒ±œÇ", 
            o: ["ŒöŒøŒπŒªŒπŒ±Œ∫ŒÆœÇ ŒëœÅœÑŒ∑œÅŒØŒ±œÇ", "ŒÜŒΩœâ ŒúŒµœÉŒµŒΩœÑŒ≠œÅŒπŒ±œÇ", "ŒöŒøŒπŒªŒπŒ±Œ∫ŒÆœÇ ŒëŒøœÅœÑŒÆœÇ", "ŒëœÅŒπœÉœÑŒµœÅŒÆœÇ ŒìŒ±œÉœÑœÅŒπŒ∫ŒÆœÇ"], 
            t: "artery"
        },
        {
            q: "Œó ŒàœÉœâ Œ£œÄŒµœÅŒºŒ±œÑŒπŒ∫ŒÆ Œ±œÅœÑŒ∑œÅŒØŒ± ŒµŒ∫œÜœçŒµœÑŒ±Œπ Œ±œÄœå:", 
            a: "ŒöŒøŒπŒªŒπŒ±Œ∫ŒÆ ŒëŒøœÅœÑŒÆ", 
            o: ["ŒöŒøŒπŒªŒπŒ±Œ∫ŒÆ ŒëŒøœÅœÑŒÆ", "ŒàœÉœâ ŒõŒ±Œ≥œåŒΩŒπŒ±", "ŒùŒµœÜœÅŒπŒ∫ŒÆ", "ŒàŒæœâ ŒõŒ±Œ≥œåŒΩŒπŒ±"], 
            t: "artery"
        },
        {
            q: "Œó ŒïœÄŒπœÄŒøŒªŒÆœÇ Œ†ŒµœÅŒπœÉœÄœâŒºŒ≠ŒΩŒ∑ ŒõŒ±Œ≥œåŒΩŒπŒ± ŒµŒØŒΩŒ±Œπ Œ∫ŒªŒ¨Œ¥ŒøœÇ œÑŒ∑œÇ:", 
            a: "ŒöŒøŒπŒΩŒÆœÇ ŒúŒ∑œÅŒπŒ±ŒØŒ±œÇ", 
            o: ["ŒöŒøŒπŒΩŒÆœÇ ŒúŒ∑œÅŒπŒ±ŒØŒ±œÇ", "ŒàŒæœâ ŒõŒ±Œ≥œåŒΩŒπŒ±œÇ", "ŒïŒΩ œÑœâ Œ≤Œ¨Œ∏ŒµŒπ ŒúŒ∑œÅŒπŒ±ŒØŒ±œÇ", "ŒàœÉœâ ŒõŒ±Œ≥œåŒΩŒπŒ±œÇ"], 
            t: "artery"
        },

        // --- Œ¶ŒõŒïŒíŒïŒ£ ---
        {
            q: "Œ†Œøœç ŒµŒ∫Œ≤Œ¨ŒªŒªŒµŒπ Œ∑ ŒöŒµœÜŒ±ŒªŒπŒ∫ŒÆ œÜŒªŒ≠Œ≤Œ±;", 
            a: "ŒúŒ±œÉœáŒ±ŒªŒπŒ±ŒØŒ±", 
            o: ["ŒúŒ±œÉœáŒ±ŒªŒπŒ±ŒØŒ±", "ŒíœÅŒ±œáŒπœåŒΩŒπŒ±", "ŒíŒ±œÉŒπŒªŒπŒ∫ŒÆ", "Œ•œÄŒøŒ∫ŒªŒµŒØŒ¥ŒπŒ±"], 
            t: "vein"
        },
        {
            q: "Œ†Œøœç ŒµŒ∫Œ≤Œ¨ŒªŒªŒµŒπ Œ∑ ŒíŒ±œÉŒπŒªŒπŒ∫ŒÆ œÜŒªŒ≠Œ≤Œ±;", 
            a: "ŒàœÉœâ ŒíœÅŒ±œáŒπœåŒΩŒπŒ±", 
            o: ["ŒàœÉœâ ŒíœÅŒ±œáŒπœåŒΩŒπŒ±", "ŒúŒ±œÉœáŒ±ŒªŒπŒ±ŒØŒ±", "ŒöŒµœÜŒ±ŒªŒπŒ∫ŒÆ", "Œ•œÄŒøŒ∫ŒªŒµŒØŒ¥ŒπŒ±"], 
            t: "vein"
        },
        {
            q: "Œ†Œøœç ŒµŒ∫Œ≤Œ¨ŒªŒªŒµŒπ Œ∑ ŒîŒµŒæŒπŒ¨ ŒàœÉœâ Œ£œÄŒµœÅŒºŒ±œÑŒπŒ∫ŒÆ;", 
            a: "ŒöŒ¨œÑœâ ŒöŒøŒØŒªŒ∑", 
            o: ["ŒöŒ¨œÑœâ ŒöŒøŒØŒªŒ∑", "ŒîŒµŒæŒπŒ¨ ŒùŒµœÜœÅŒπŒ∫ŒÆ", "ŒîŒµŒæŒπŒ¨ ŒïœÄŒπŒΩŒµœÜœÅŒØŒ¥ŒπŒ±", "Œ†œÖŒªŒ±ŒØŒ±"], 
            t: "vein"
        },
        {
            q: "Œ†Œøœç ŒµŒ∫Œ≤Œ¨ŒªŒªŒµŒπ Œ∑ ŒëœÅŒπœÉœÑŒµœÅŒÆ ŒàœÉœâ Œ£œÄŒµœÅŒºŒ±œÑŒπŒ∫ŒÆ;", 
            a: "ŒëœÅŒπœÉœÑŒµœÅŒÆ ŒùŒµœÜœÅŒπŒ∫ŒÆ", 
            o: ["ŒëœÅŒπœÉœÑŒµœÅŒÆ ŒùŒµœÜœÅŒπŒ∫ŒÆ", "ŒöŒ¨œÑœâ ŒöŒøŒØŒªŒ∑", "ŒëœÅŒπœÉœÑŒµœÅŒÆ ŒïœÄŒπŒΩŒµœÜœÅŒØŒ¥ŒπŒ±", "Œ£œÄŒªŒ∑ŒΩŒπŒ∫ŒÆ"], 
            t: "vein"
        },
        {
            q: "Œó ŒúŒµŒØŒ∂œâŒΩ Œ£Œ±œÜŒ∑ŒΩŒÆœÇ œÜŒªŒ≠Œ≤Œ± ŒµŒ∫Œ≤Œ¨ŒªŒªŒµŒπ œÉœÑŒ∑:", 
            a: "ŒúŒ∑œÅŒπŒ±ŒØŒ±", 
            o: ["ŒúŒ∑œÅŒπŒ±ŒØŒ±", "ŒôŒ≥ŒΩœÖŒ±Œ∫ŒÆ", "ŒàŒæœâ ŒõŒ±Œ≥œåŒΩŒπŒ±", "ŒïŒªŒ¨œÉœÉŒøŒΩŒ± Œ£Œ±œÜŒ∑ŒΩŒÆ"], 
            t: "vein"
        },
        {
            q: "Œó ŒïŒªŒ¨œÉœÉœâŒΩ Œ£Œ±œÜŒ∑ŒΩŒÆœÇ œÜŒªŒ≠Œ≤Œ± ŒµŒ∫Œ≤Œ¨ŒªŒªŒµŒπ œÉœÑŒ∑:", 
            a: "ŒôŒ≥ŒΩœÖŒ±Œ∫ŒÆ", 
            o: ["ŒôŒ≥ŒΩœÖŒ±Œ∫ŒÆ", "ŒúŒ∑œÅŒπŒ±ŒØŒ±", "ŒúŒµŒØŒ∂ŒøŒΩŒ± Œ£Œ±œÜŒ∑ŒΩŒÆ", "ŒüœÄŒØœÉŒ∏ŒπŒ± ŒöŒΩŒ∑ŒºŒπŒ±ŒØŒ±"], 
            t: "vein"
        },
        {
            q: "Œ†Œøœç ŒµŒ∫Œ≤Œ¨ŒªŒªŒµŒπ Œø Œ£ŒπŒ≥ŒºŒøŒµŒπŒ¥ŒÆœÇ ŒöœåŒªœÄŒøœÇ;", 
            a: "ŒàœÉœâ Œ£œÜŒ±Œ≥ŒØœÑŒπŒ¥Œ±", 
            o: ["ŒàœÉœâ Œ£œÜŒ±Œ≥ŒØœÑŒπŒ¥Œ±", "ŒàŒæœâ Œ£œÜŒ±Œ≥ŒØœÑŒπŒ¥Œ±", "ŒïŒ≥Œ∫Œ¨œÅœÉŒπŒø ŒöœåŒªœÄŒø", "ŒõŒ∑ŒΩœå ŒóœÅŒøœÜŒØŒªŒøœÖ"], 
            t: "vein"
        },
        {
            q: "Œó ŒöŒ¨œÑœâ ŒúŒµœÉŒµŒΩœÑŒ≠œÅŒπŒ± œÜŒªŒ≠Œ≤Œ± ŒµŒ∫Œ≤Œ¨ŒªŒªŒµŒπ œÉœÖŒΩŒÆŒ∏œâœÇ œÉœÑŒ∑:", 
            a: "Œ£œÄŒªŒ∑ŒΩŒπŒ∫ŒÆ", 
            o: ["Œ£œÄŒªŒ∑ŒΩŒπŒ∫ŒÆ", "ŒÜŒΩœâ ŒúŒµœÉŒµŒΩœÑŒ≠œÅŒπŒ±", "Œ†œÖŒªŒ±ŒØŒ±", "ŒöŒ¨œÑœâ ŒöŒøŒØŒªŒ∑"], 
            t: "vein"
        },
        {
            q: "Œ†Œøœç ŒµŒ∫Œ≤Œ¨ŒªŒªŒøœÖŒΩ ŒøŒπ ŒóœÄŒ±œÑŒπŒ∫Œ≠œÇ œÜŒªŒ≠Œ≤ŒµœÇ;", 
            a: "ŒöŒ¨œÑœâ ŒöŒøŒØŒªŒ∑", 
            o: ["ŒöŒ¨œÑœâ ŒöŒøŒØŒªŒ∑", "Œ†œÖŒªŒ±ŒØŒ±", "ŒÜŒΩœâ ŒúŒµœÉŒµŒΩœÑŒ≠œÅŒπŒ±", "Œ£œÄŒªŒ∑ŒΩŒπŒ∫ŒÆ"], 
            t: "vein"
        },
        {
            q: "Œü Œ£œÑŒµœÜŒ±ŒΩŒπŒ±ŒØŒøœÇ ŒöœåŒªœÄŒøœÇ ŒµŒ∫Œ≤Œ¨ŒªŒªŒµŒπ œÉœÑŒøŒΩ:", 
            a: "ŒîŒµŒæŒπœå ŒöœåŒªœÄŒø", 
            o: ["ŒîŒµŒæŒπœå ŒöœåŒªœÄŒø", "ŒëœÅŒπœÉœÑŒµœÅœå ŒöœåŒªœÄŒø", "ŒöŒ¨œÑœâ ŒöŒøŒØŒªŒ∑", "ŒÜŒΩœâ ŒöŒøŒØŒªŒ∑"], 
            t: "vein"
        },

        // --- ŒúŒ•ŒïŒ£ & ŒùŒïŒ•Œ°Œë ---
        {
            q: "ŒëœÄœå œÄŒøŒπŒø ŒΩŒµœçœÅŒø ŒΩŒµœÖœÅœéŒΩŒµœÑŒ±Œπ Œø Œ§œÅŒπŒ∫Œ≠œÜŒ±ŒªŒøœÇ ŒíœÅŒ±œáŒπœåŒΩŒπŒøœÇ;", 
            a: "ŒöŒµœÅŒ∫ŒπŒ¥ŒπŒ∫œå", 
            o: ["ŒöŒµœÅŒ∫ŒπŒ¥ŒπŒ∫œå", "Œ©ŒªŒ≠ŒΩŒπŒø", "ŒúŒ≠œÉŒø", "ŒúœÖŒøŒ¥ŒµœÅŒºŒ±œÑŒπŒ∫œå"], 
            t: "muscle"
        },
        {
            q: "Œü ŒîŒπŒ∫Œ≠œÜŒ±ŒªŒøœÇ ŒíœÅŒ±œáŒπœåŒΩŒπŒøœÇ ŒΩŒµœÖœÅœéŒΩŒµœÑŒ±Œπ Œ±œÄœå œÑŒø:", 
            a: "ŒúœÖŒøŒ¥ŒµœÅŒºŒ±œÑŒπŒ∫œå", 
            o: ["ŒúœÖŒøŒ¥ŒµœÅŒºŒ±œÑŒπŒ∫œå", "ŒöŒµœÅŒ∫ŒπŒ¥ŒπŒ∫œå", "ŒúŒ≠œÉŒø", "ŒúŒ±œÉœáŒ±ŒªŒπŒ±ŒØŒø"], 
            t: "muscle"
        },
        {
            q: "Œ†ŒøŒπŒø ŒΩŒµœçœÅŒø ŒΩŒµœÖœÅœéŒΩŒµŒπ œÑŒøŒΩ ŒîŒµŒªœÑŒøŒµŒπŒ¥ŒÆ;", 
            a: "ŒúŒ±œÉœáŒ±ŒªŒπŒ±ŒØŒø", 
            o: ["ŒúŒ±œÉœáŒ±ŒªŒπŒ±ŒØŒø", "Œ•œÄŒµœÅœÄŒªŒ¨œÑŒπŒø", "ŒòœâœÅŒ±Œ∫ŒøœÅœÅŒ±œáŒπŒ±ŒØŒø", "ŒöŒµœÅŒ∫ŒπŒ¥ŒπŒ∫œå"], 
            t: "muscle"
        },
        {
            q: "ŒüŒπ ŒúŒµœÉœåœÉœÑŒµŒøŒπ ŒºœçŒµœÇ œÑŒøœÖ œáŒµœÅŒπŒøœç ŒΩŒµœÖœÅœéŒΩŒøŒΩœÑŒ±Œπ Œ±œÄœå œÑŒø:", 
            a: "Œ©ŒªŒ≠ŒΩŒπŒø", 
            o: ["Œ©ŒªŒ≠ŒΩŒπŒø", "ŒúŒ≠œÉŒø", "ŒöŒµœÅŒ∫ŒπŒ¥ŒπŒ∫œå", "ŒúœÖŒøŒ¥ŒµœÅŒºŒ±œÑŒπŒ∫œå"], 
            t: "muscle"
        },
        {
            q: "Œü Œ†œÅœåœÉŒ∏ŒπŒøœÇ ŒüŒ¥ŒøŒΩœÑœâœÑœåœÇ ŒΩŒµœÖœÅœéŒΩŒµœÑŒ±Œπ Œ±œÄœå œÑŒø:", 
            a: "ŒúŒ±Œ∫œÅœå ŒòœâœÅŒ±Œ∫ŒπŒ∫œå", 
            o: ["ŒúŒ±Œ∫œÅœå ŒòœâœÅŒ±Œ∫ŒπŒ∫œå", "ŒòœâœÅŒ±Œ∫ŒøœÅœÅŒ±œáŒπŒ±ŒØŒø", "ŒàœÉœâ ŒòœâœÅŒ±Œ∫ŒπŒ∫œå", "ŒúŒ±œÉœáŒ±ŒªŒπŒ±ŒØŒø"], 
            t: "muscle"
        },
        {
            q: "Œü Œ†ŒªŒ±œÑœçœÇ Œ°Œ±œáŒπŒ±ŒØŒøœÇ ŒΩŒµœÖœÅœéŒΩŒµœÑŒ±Œπ Œ±œÄœå œÑŒø:", 
            a: "ŒòœâœÅŒ±Œ∫ŒøœÅœÅŒ±œáŒπŒ±ŒØŒø", 
            o: ["ŒòœâœÅŒ±Œ∫ŒøœÅœÅŒ±œáŒπŒ±ŒØŒø", "Œ°Œ±œáŒπŒ±ŒØŒø œÑŒ∑œÇ Œ©ŒºŒøœÄŒªŒ¨œÑŒ∑œÇ", "ŒúŒ±Œ∫œÅœå ŒòœâœÅŒ±Œ∫ŒπŒ∫œå", "ŒúŒ±œÉœáŒ±ŒªŒπŒ±ŒØŒø"], 
            t: "muscle"
        },
        {
            q: "ŒüŒπ ŒºœçŒµœÇ œÑŒøœÖ œÄœÅŒøœÉœéœÄŒøœÖ (ŒºŒπŒºŒπŒ∫ŒøŒØ) ŒΩŒµœÖœÅœéŒΩŒøŒΩœÑŒ±Œπ Œ±œÄœå œÑŒø:", 
            a: "Œ†œÅŒøœÉœâœÄŒπŒ∫œå", 
            o: ["Œ†œÅŒøœÉœâœÄŒπŒ∫œå", "Œ§œÅŒØŒ¥œÖŒºŒø", "ŒìŒªœâœÉœÉŒøœÜŒ±œÅœÖŒ≥Œ≥ŒπŒ∫œå", "ŒüœÜŒ∏Œ±ŒªŒºŒπŒ∫œå"], 
            t: "muscle"
        },
        {
            q: "Œü ŒúŒ±œÉŒ∑œÑŒÆœÅŒ±œÇ ŒΩŒµœÖœÅœéŒΩŒµœÑŒ±Œπ Œ±œÄœå œÑŒø:", 
            a: "ŒöŒ¨œÑœâ ŒìŒΩŒ±Œ∏ŒπŒ∫œå", 
            o: ["ŒöŒ¨œÑœâ ŒìŒΩŒ±Œ∏ŒπŒ∫œå", "Œ†œÅŒøœÉœâœÄŒπŒ∫œå", "ŒÜŒΩœâ ŒìŒΩŒ±Œ∏ŒπŒ∫œå", "Œ•œÄŒøŒ≥ŒªœéœÉœÉŒπŒø"], 
            t: "muscle"
        },
        {
            q: "Œü Œ£œÑŒµœÅŒΩŒøŒ∫ŒªŒµŒπŒ¥ŒøŒºŒ±œÉœÑŒøŒµŒπŒ¥ŒÆœÇ ŒΩŒµœÖœÅœéŒΩŒµœÑŒ±Œπ Œ±œÄœå œÑŒø:", 
            a: "Œ†Œ±œÅŒ±œÄŒªŒ∑œÅœâŒºŒ±œÑŒπŒ∫œå", 
            o: ["Œ†Œ±œÅŒ±œÄŒªŒ∑œÅœâŒºŒ±œÑŒπŒ∫œå", "ŒëœÖœáŒµŒΩŒπŒ∫œå Œ†ŒªŒ≠Œ≥ŒºŒ±", "Œ†œÅŒøœÉœâœÄŒπŒ∫œå", "Œ•œÄŒøŒ≥ŒªœéœÉœÉŒπŒø"], 
            t: "muscle"
        },
        {
            q: "Œ§Œø ŒîŒπŒ¨œÜœÅŒ±Œ≥ŒºŒ± ŒΩŒµœÖœÅœéŒΩŒµœÑŒ±Œπ Œ±œÄœå œÑŒø:", 
            a: "Œ¶œÅŒµŒΩŒπŒ∫œå", 
            o: ["Œ¶œÅŒµŒΩŒπŒ∫œå", "Œ†ŒΩŒµœÖŒºŒøŒΩŒøŒ≥Œ±œÉœÑœÅŒπŒ∫œå", "ŒúŒµœÉŒøœÄŒªŒµœçœÅŒπŒ±", "ŒòœâœÅŒ±Œ∫ŒπŒ∫œå"], 
            t: "muscle"
        },
        {
            q: "Œü Œ§ŒµœÑœÅŒ±Œ∫Œ≠œÜŒ±ŒªŒøœÇ ŒúŒ∑œÅŒπŒ±ŒØŒøœÇ ŒΩŒµœÖœÅœéŒΩŒµœÑŒ±Œπ Œ±œÄœå œÑŒø:", 
            a: "ŒúŒ∑œÅŒπŒ±ŒØŒø", 
            o: ["ŒúŒ∑œÅŒπŒ±ŒØŒø", "ŒôœÉœáŒπŒ±Œ∫œå", "ŒòœÖœÅŒøŒµŒπŒ¥Œ≠œÇ", "ŒìŒªŒøœÖœÑŒπŒ±ŒØŒø"], 
            t: "muscle"
        },
        {
            q: "ŒüŒπ Œ†œÅŒøœÉŒ±Œ≥œâŒ≥ŒøŒØ ŒºœçŒµœÇ œÑŒøœÖ ŒºŒ∑œÅŒøœç ŒΩŒµœÖœÅœéŒΩŒøŒΩœÑŒ±Œπ Œ∫œÖœÅŒØœâœÇ Œ±œÄœå œÑŒø:", 
            a: "ŒòœÖœÅŒøŒµŒπŒ¥Œ≠œÇ", 
            o: ["ŒòœÖœÅŒøŒµŒπŒ¥Œ≠œÇ", "ŒúŒ∑œÅŒπŒ±ŒØŒø", "ŒôœÉœáŒπŒ±Œ∫œå", "ŒöŒΩŒ∑ŒºŒπŒ±ŒØŒø"], 
            t: "muscle"
        },
        {
            q: "Œü ŒìŒ±œÉœÑœÅŒøŒ∫ŒΩŒÆŒºŒπŒøœÇ ŒΩŒµœÖœÅœéŒΩŒµœÑŒ±Œπ Œ±œÄœå œÑŒø:", 
            a: "ŒöŒΩŒ∑ŒºŒπŒ±ŒØŒø", 
            o: ["ŒöŒΩŒ∑ŒºŒπŒ±ŒØŒø", "Œ†ŒµœÅŒøŒΩŒπŒ±ŒØŒø", "ŒúŒ∑œÅŒπŒ±ŒØŒø", "Œ£Œ±œÜŒ∑ŒΩŒ≠œÇ"], 
            t: "muscle"
        },
        {
            q: "Œü Œ†œÅœåœÉŒ∏ŒπŒøœÇ ŒöŒΩŒ∑ŒºŒπŒ±ŒØŒøœÇ ŒΩŒµœÖœÅœéŒΩŒµœÑŒ±Œπ Œ±œÄœå œÑŒø:", 
            a: "ŒïŒΩ œÑœâ Œ≤Œ¨Œ∏ŒµŒπ Œ†ŒµœÅŒøŒΩŒπŒ±ŒØŒø", 
            o: ["ŒïŒΩ œÑœâ Œ≤Œ¨Œ∏ŒµŒπ Œ†ŒµœÅŒøŒΩŒπŒ±ŒØŒø", "ŒïœÄŒπœÄŒøŒªŒÆœÇ Œ†ŒµœÅŒøŒΩŒπŒ±ŒØŒø", "ŒöŒΩŒ∑ŒºŒπŒ±ŒØŒø", "ŒúŒ∑œÅŒπŒ±ŒØŒø"], 
            t: "muscle"
        },
        {
            q: "Œü Œ§œÅŒ±œÄŒµŒ∂ŒøŒµŒπŒ¥ŒÆœÇ ŒΩŒµœÖœÅœéŒΩŒµœÑŒ±Œπ Œ±œÄœå œÑŒø:", 
            a: "Œ†Œ±œÅŒ±œÄŒªŒ∑œÅœâŒºŒ±œÑŒπŒ∫œå", 
            o: ["Œ†Œ±œÅŒ±œÄŒªŒ∑œÅœâŒºŒ±œÑŒπŒ∫œå", "Œ°Œ±œáŒπŒ±ŒØŒø œÑŒ∑œÇ Œ©ŒºŒøœÄŒªŒ¨œÑŒ∑œÇ", "ŒúŒ±œÉœáŒ±ŒªŒπŒ±ŒØŒø", "ŒòœâœÅŒ±Œ∫ŒøœÅœÅŒ±œáŒπŒ±ŒØŒø"], 
            t: "muscle"
        },

        // --- ŒüŒ°ŒìŒëŒùŒë ---
        {
            q: "Œ§Œø ŒöœÖœÉœÑŒπŒ∫œå Œ§œÅŒØŒ≥œâŒΩŒø Œ≤œÅŒØœÉŒ∫ŒµœÑŒ±Œπ œÉœÑŒ∑ŒΩ:", 
            a: "ŒüœÖœÅŒøŒ¥œåœáŒø ŒöœçœÉœÑŒ∑", 
            o: ["ŒüœÖœÅŒøŒ¥œåœáŒø ŒöœçœÉœÑŒ∑", "ŒßŒøŒªŒ∑Œ¥œåœáŒø ŒöœçœÉœÑŒ∑", "ŒùŒµœÜœÅŒπŒ∫ŒÆ Œ†œçŒµŒªŒø", "ŒúŒÆœÑœÅŒ±"], 
            t: "organ"
        },
        {
            q: "Œ§Œ± ŒΩŒ∑œÉŒØŒ¥ŒπŒ± œÑŒøœÖ Langerhans Œ≤œÅŒØœÉŒ∫ŒøŒΩœÑŒ±Œπ œÉœÑŒø:", 
            a: "Œ†Œ¨Œ≥Œ∫œÅŒµŒ±œÇ", 
            o: ["Œ†Œ¨Œ≥Œ∫œÅŒµŒ±œÇ", "ŒâœÄŒ±œÅ", "Œ£œÄŒªŒÆŒΩŒ±", "ŒòœÖœÅŒµŒøŒµŒπŒ¥ŒÆ"], 
            t: "organ"
        },
        {
            q: "Œó Œ§œÅœåœÄŒπŒ¥Œ± Œ≤œÅŒØœÉŒ∫ŒµœÑŒ±Œπ:", 
            a: "Œ£œÑŒø Œ¥ŒπœáŒ±œÉŒºœå œÑŒ∑œÇ Œ§œÅŒ±œáŒµŒØŒ±œÇ", 
            o: ["Œ£œÑŒø Œ¥ŒπœáŒ±œÉŒºœå œÑŒ∑œÇ Œ§œÅŒ±œáŒµŒØŒ±œÇ", "Œ£œÑŒøŒΩ ŒõŒ¨œÅœÖŒ≥Œ≥Œ±", "Œ£œÑŒøŒΩ Œ¶Œ¨œÅœÖŒ≥Œ≥Œ±", "Œ£œÑŒøŒΩ ŒüŒπœÉŒøœÜŒ¨Œ≥Œø"], 
            t: "organ"
        },
        {
            q: "Œ§Œø Œ§œÅŒØŒ≥œâŒΩŒø œÑŒøœÖ Calot œÉœáŒµœÑŒØŒ∂ŒµœÑŒ±Œπ ŒºŒµ:", 
            a: "ŒßŒøŒªŒ∑Œ¥œåœáŒø ŒöœçœÉœÑŒ∑/ŒâœÄŒ±œÅ", 
            o: ["ŒßŒøŒªŒ∑Œ¥œåœáŒø ŒöœçœÉœÑŒ∑/ŒâœÄŒ±œÅ", "Œ£œÑŒøŒºŒ¨œáŒπ", "Œ£Œ∫œâŒªŒ∑Œ∫ŒøŒµŒπŒ¥ŒÆ Œ±œÄœåœÜœÖœÉŒ∑", "ŒüœÖœÅŒøŒ¥œåœáŒø ŒöœçœÉœÑŒ∑"], 
            t: "organ"
        },
        {
            q: "Œü ŒîŒøœÖŒ≥ŒªŒ¨œÉœÉŒπŒøœÇ œáœéœÅŒøœÇ Œ≤œÅŒØœÉŒ∫ŒµœÑŒ±Œπ ŒºŒµœÑŒ±Œæœç:", 
            a: "ŒúŒÆœÑœÅŒ±œÇ Œ∫Œ±Œπ ŒüœÅŒ∏Œøœç", 
            o: ["ŒúŒÆœÑœÅŒ±œÇ Œ∫Œ±Œπ ŒüœÅŒ∏Œøœç", "ŒúŒÆœÑœÅŒ±œÇ Œ∫Œ±Œπ ŒöœçœÉœÑŒ∑œÇ", "ŒüœÅŒ∏Œøœç Œ∫Œ±Œπ ŒöœçœÉœÑŒ∑œÇ", "ŒâœÄŒ±œÑŒøœÇ Œ∫Œ±Œπ ŒùŒµœÜœÅŒøœç"], 
            t: "organ"
        }
    ];

    // --- LOGIC ---
    let currentIdx = 0;
    let shuffledIndices = Array.from(database.keys()).sort(() => 0.5 - Math.random());
    let userResults = new Array(database.length).fill(null); 
    // We do NOT shuffle options every time. We store the shuffled order once generated.
    let questionStates = new Array(database.length).fill(null);

    const els = {
        question: document.getElementById('question'),
        badge: document.getElementById('badge'),
        options: document.getElementById('options'),
        progress: document.getElementById('progress-fill'),
        qCounter: document.getElementById('q-counter'),
        sCounter: document.getElementById('score-counter'),
        prev: document.getElementById('prev-btn'),
        next: document.getElementById('next-btn'),
        navModal: document.getElementById('navModal'),
        navGrid: document.getElementById('nav-grid')
    };

    function init() {
        loadQuestion();
        updateNavGrid();
    }

    function loadQuestion() {
        const realIdx = shuffledIndices[currentIdx];
        const data = database[realIdx];
        
        // Prepare options if not already done for this index
        if (!questionStates[realIdx]) {
            // Clone options and shuffle
            let opts = [...data.o];
            opts.sort(() => 0.5 - Math.random());
            questionStates[realIdx] = opts;
        }
        
        const currentOptions = questionStates[realIdx];
        const status = userResults[realIdx]; // null, true, false

        // UI Updates
        els.qCounter.innerText = `ŒïœÅœéœÑŒ∑œÉŒ∑ ${currentIdx + 1} / ${database.length}`;
        els.progress.style.width = `${((currentIdx + 1) / database.length) * 100}%`;
        updateScore();

        // Badge
        els.badge.className = 'badge';
        if(data.t === 'artery') { els.badge.classList.add('badge-artery'); els.badge.innerText = 'ŒëŒ°Œ§ŒóŒ°ŒôŒë'; }
        else if(data.t === 'vein') { els.badge.classList.add('badge-vein'); els.badge.innerText = 'Œ¶ŒõŒïŒíŒë'; }
        else if(data.t === 'muscle') { els.badge.classList.add('badge-muscle'); els.badge.innerText = 'ŒúŒ•Œ£/ŒùŒïŒ•Œ°Œü'; }
        else { els.badge.classList.add('badge-organ'); els.badge.innerText = 'ŒüŒ°ŒìŒëŒùŒü'; }

        els.question.innerText = data.q;
        els.options.innerHTML = '';

        // Render Buttons
        currentOptions.forEach(optText => {
            const btn = document.createElement('button');
            btn.className = 'option-btn';
            btn.innerText = optText;

            if (status !== null) {
                // Already answered
                btn.disabled = true;
                if (optText === data.a) {
                    btn.classList.add('correct-answer');
                } else if (status === false) {
                    // We don't track specifically which wrong button was pressed in this simple version,
                    // but we ensure the correct one is highlighted green.
                    // If you want to highlight the user's specific wrong choice red, we'd need to store it.
                    // For now, Green implies "Here is the answer".
                }
            } else {
                btn.onclick = () => handleAnswer(optText, data.a, btn, realIdx);
            }
            els.options.appendChild(btn);
        });

        els.prev.disabled = (currentIdx === 0);
        els.next.disabled = (currentIdx === database.length - 1);
    }

    function handleAnswer(selected, correct, btn, realIdx) {
        const isCorrect = (selected === correct);
        userResults[realIdx] = isCorrect;

        // Visual Feedback Immediate
        const allBtns = els.options.querySelectorAll('.option-btn');
        allBtns.forEach(b => {
            b.disabled = true;
            if (b.innerText === correct) b.classList.add('correct-answer');
            if (b === btn && !isCorrect) b.classList.add('wrong-answer');
        });

        updateNavGrid();
        updateScore();
    }

    function updateScore() {
        const answered = userResults.filter(r => r !== null).length;
        const correct = userResults.filter(r => r === true).length;
        const score = answered === 0 ? 0 : Math.round((correct / answered) * 100);
        els.sCounter.innerText = `Score: ${score}% (${correct}/${answered})`;
    }

    function nextQ() {
        if (currentIdx < database.length - 1) {
            currentIdx++;
            loadQuestion();
        }
    }

    function prevQ() {
        if (currentIdx > 0) {
            currentIdx--;
            loadQuestion();
        }
    }

    function toggleNav() {
        els.navModal.style.display = (els.navModal.style.display === 'flex') ? 'none' : 'flex';
    }

    function updateNavGrid() {
        els.navGrid.innerHTML = '';
        shuffledIndices.forEach((realIdx, displayIdx) => {
            const div = document.createElement('div');
            div.className = 'nav-item';
            div.innerText = displayIdx + 1;
            
            const res = userResults[realIdx];
            if (res === true) div.classList.add('correct');
            else if (res === false) div.classList.add('wrong');
            
            if (displayIdx === currentIdx) div.classList.add('active');

            div.onclick = () => {
                currentIdx = displayIdx;
                loadQuestion();
                toggleNav();
            };
            els.navGrid.appendChild(div);
        });
    }

    init();
</script>
</body>
</html>
