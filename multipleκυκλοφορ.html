<!DOCTYPE html>
<html lang="el" class="">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz: Κυκλοφορικό Σύστημα - Full Version</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
        }
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        .glass-card {
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }
        .dark .glass-card {
            background: rgba(30, 41, 59, 0.9);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .nav-btn { transition: all 0.2s ease; }
        .nav-btn.active { ring: 2px; ring-offset: 2px; background-color: #3b82f6 !important; color: white !important; }
        .nav-btn.correct { background-color: #22c55e !important; color: white !important; }
        .nav-btn.wrong { background-color: #ef4444 !important; color: white !important; }
        
        .option-btn { transition: all 0.2s ease; }
        .option-btn:hover:not(:disabled) { border-color: #3b82f6; background-color: #eff6ff; }
        .dark .option-btn:hover:not(:disabled) { background-color: #1e293b; border-color: #3b82f6; }
        
        .correct-opt { background-color: #dcfce7 !important; border-color: #22c55e !important; color: #166534 !important; }
        .wrong-opt { background-color: #fee2e2 !important; border-color: #ef4444 !important; color: #991b1b !important; }
        
        .dark .correct-opt { background-color: #064e3b !important; border-color: #10b981 !important; color: #ecfdf5 !important; }
        .dark .wrong-opt { background-color: #7f1d1d !important; border-color: #ef4444 !important; color: #fef2f2 !important; }

        /* Custom scrollbar for nav */
        #nav-grid-container::-webkit-scrollbar { width: 5px; }
        #nav-grid-container::-webkit-scrollbar-track { background: transparent; }
        #nav-grid-container::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
    </style>
</head>
<body class="bg-slate-50 dark:bg-slate-950 text-slate-900 dark:text-slate-100 p-4 md:p-8 flex flex-col items-center min-h-screen">

    <div class="max-w-3xl w-full">
        <header class="flex justify-between items-center mb-6">
            <div>
                <h1 class="text-xl font-black tracking-tight">Κυκλοφορικό Σύστημα</h1>
                <p class="text-slate-500 dark:text-slate-400 text-xs">Interactive Assessment v3.5 - Πλήρης Κατάλογος</p>
            </div>
            
            <div class="flex items-center gap-2">
                <button onclick="toggleDarkMode()" class="p-2.5 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl shadow-sm hover:bg-slate-50 dark:hover:bg-slate-700 transition-all">
                    <svg id="sun-icon" class="h-5 w-5 text-amber-500 hidden" fill="currentColor" viewBox="0 0 20 20"><path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z"/></svg>
                    <svg id="moon-icon" class="h-5 w-5 text-slate-600" fill="currentColor" viewBox="0 0 20 20"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"/></svg>
                </button>

                <button onclick="toggleModal(true)" class="flex items-center gap-2 px-4 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl shadow-sm hover:bg-slate-50 dark:hover:bg-slate-700 transition-all font-bold text-sm">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" /></svg>
                    <span class="hidden sm:inline">Ερωτήσεις</span>
                </button>
            </div>
        </header>

        <main id="quiz-area" class="glass-card bg-white rounded-3xl shadow-xl p-6 md:p-10 min-h-[450px] flex flex-col relative overflow-hidden">
            <div class="absolute top-0 left-0 w-full h-1.5 bg-slate-100 dark:bg-slate-800">
                <div id="inner-progress" class="h-full bg-blue-500 transition-all duration-500" style="width: 0%"></div>
            </div>

            <div id="question-content">
                <div class="flex justify-between items-center mb-6">
                    <span class="text-blue-600 dark:text-blue-400 font-bold text-xs uppercase tracking-widest">Ερώτηση <span id="current-num">1</span>/<span id="total-num">--</span></span>
                    <span id="score-badge" class="bg-slate-100 dark:bg-slate-800 px-3 py-1 rounded-full text-[10px] font-bold uppercase tracking-tighter">Σκορ: 0</span>
                </div>

                <h2 id="question-text" class="text-lg md:text-xl font-bold mb-8 leading-snug"></h2>
                
                <div id="options-list" class="space-y-3"></div>

                <div id="feedback-box" class="mt-8 p-5 rounded-2xl hidden transform transition-all">
                    <div class="flex gap-4">
                        <div id="feedback-icon" class="flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center text-white text-xs font-bold"></div>
                        <div>
                            <h4 id="feedback-title" class="font-bold mb-1 text-[10px] uppercase tracking-wide"></h4>
                            <p id="feedback-msg" class="text-sm leading-relaxed"></p>
                        </div>
                    </div>
                </div>
            </div>

            <button id="next-btn" onclick="goToNext()" class="mt-8 w-full md:w-auto md:ml-auto px-8 py-3.5 bg-slate-900 dark:bg-blue-600 text-white rounded-xl font-bold hover:opacity-90 transition-all shadow-lg hidden">
                Επόμενη Ερώτηση
            </button>

            <div id="result-screen" class="hidden flex-col items-center justify-center h-full py-10 text-center">
                <div class="w-20 h-20 bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-full flex items-center justify-center text-3xl mb-4 mx-auto">🏆</div>
                <h2 class="text-3xl font-black mb-2">Ολοκλήρωση!</h2>
                <p class="text-slate-500 dark:text-slate-400 mb-8">Ολοκληρώσατε την αξιολόγηση του κυκλοφορικού συστήματος.</p>
                
                <div class="grid grid-cols-2 gap-4 w-full max-w-xs mb-8">
                    <div class="bg-slate-50 dark:bg-slate-800/50 p-4 rounded-2xl">
                        <div class="text-[9px] font-bold text-slate-400 uppercase mb-1">Σκορ</div>
                        <div class="text-2xl font-black"><span id="final-score">0</span>/<span id="final-total">0</span></div>
                    </div>
                    <div class="bg-slate-50 dark:bg-slate-800/50 p-4 rounded-2xl">
                        <div class="text-[9px] font-bold text-slate-400 uppercase mb-1">Ποσοστό</div>
                        <div class="text-2xl font-black text-blue-600"><span id="final-pct">0</span>%</div>
                    </div>
                </div>

                <button onclick="restartQuiz()" class="px-10 py-4 bg-blue-600 text-white rounded-2xl font-bold hover:bg-blue-700 transition-all shadow-xl">
                    Επανεκκίνηση
                </button>
            </div>
        </main>
    </div>

    <!-- Navigation Modal -->
    <div id="nav-modal" class="hidden fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-950/80 backdrop-blur-sm">
        <div class="glass-card bg-white dark:bg-slate-900 w-full max-w-md rounded-3xl shadow-2xl overflow-hidden">
            <div class="p-6 border-b border-slate-100 dark:border-slate-800 flex justify-between items-center">
                <h3 class="font-bold">Πλοήγηση Ερωτήσεων</h3>
                <button onclick="toggleModal(false)" class="p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                </button>
            </div>
            <div id="nav-grid-container" class="p-6 max-h-[60vh] overflow-y-auto bg-slate-50/30 dark:bg-slate-900/30">
                <div id="nav-grid" class="grid grid-cols-5 gap-3"></div>
            </div>
            <div class="p-4 text-center">
                <button onclick="toggleModal(false)" class="text-blue-600 dark:text-blue-400 font-bold text-sm">Επιστροφή στο Quiz</button>
            </div>
        </div>
    </div>

    <script>
        // Full Quiz Data - Standardized
        const quizData = [
            { q: "Ποια από τις παρακάτω λειτουργίες ΔΕΝ αποτελεί κύρια αρμοδιότητα του κυκλοφορικού συστήματος;", options: ["Μεταφορά ορμονών και θρεπτικών συστατικών", "Παραγωγή βιταμίνης D μέσω της ηλιακής ακτινοβολίας", "Ρύθμιση της θερμοκρασίας του σώματος", "Απομάκρυνση άχρηστων προϊόντων του μεταβολισμού"], correct: 1, reason: "Η παραγωγή βιταμίνης D είναι λειτουργία του δέρματος." },
            { q: "Τι εξασφαλίζει τη μονόδρομη ροή του αίματος στις φλέβες, παρά τη χαμηλή πίεση;", options: ["Ο παχύς μέσος χιτώνας", "Η ώθηση από την αριστερή κοιλία", "Οι φλεβικές βαλβίδες", "Η παρουσία τενόντιων χορδών"], correct: 2, reason: "Οι βαλβίδες εμποδίζουν την παλινδρόμηση του αίματος λόγω βαρύτητας." },
            { q: "Από ποιο τμήμα της καρδιάς ξεκινά η πνευμονική κυκλοφορία;", options: ["Από τον δεξιό κόλπο", "Από την αριστερή κοιλία", "Από τον αριστερό κόλπο", "Από τη δεξιά κοιλία"], correct: 3, reason: "Η δεξιά κοιλία στέλνει το μη οξυγονωμένο αίμα στους πνεύμονες μέσω της πνευμονικής αρτηρίας." },
            { q: "Τι επιτρέπουν οι χασμοσύνδεσμοι (gap junctions) στους εμβόλιμους δίσκους;", options: ["Τη μηχανική συνοχή των κυττάρων", "Τη μετάδοση των ερεθισμάτων μεταξύ των κυττάρων", "Τη σύνδεση των βαλβίδων με τους θηλοειδείς μυς", "Την παραγωγή ATP για τη συστολή"], correct: 1, reason: "Επιτρέπουν τη γρήγορη ηλεκτρική επικοινωνία ώστε η καρδιά να συσπάται ως συγκύτιο." },
            { q: "Ποιο είναι το κύριο χαρακτηριστικό των αυτορρυθμικών κυττάρων της καρδιάς;", options: ["Αποτελούν το 99% των καρδιακών κυττάρων", "Παράγουν το μηχανικό έργο της συστολής", "Παράγουν δυναμικά δράσης αυτόματα χωρίς νευρική διέγερση", "Διαθέτουν πολύ μεγάλο πάχος τοιχώματος"], correct: 2, reason: "Είναι οι φυσικοί βηματοδότες της καρδιάς." },
            { q: "Στο ΗΚΓ, ποιο κύμα αντιστοιχεί στην εκπόλωση των κόλπων;", options: ["Κύμα T", "Κύμα P", "Σύμπλεγμα QRS", "Διάστημα ST"], correct: 1, reason: "Το κύμα P αντιπροσωπεύει την ηλεκτρική διέγερση των κόλπων." },
            { q: "Τι 'κρύβεται' κάτω από το σύμπλεγμα QRS στο ηλεκτροκαρδιογράφημα;", options: ["Η εκπόλωση των κοιλιών", "Η επαναπόλωση των κόλπων", "Η κολπική συστολή", "Η πλήρωση των κοιλιών"], correct: 1, reason: "Η επαναπόλωση των κόλπων συμβαίνει ταυτόχρονα με την εκπόλωση των κοιλιών και επικαλύπτεται." },
            { q: "Το κύμα T αντιπροσωπεύει:", options: ["Την εκπόλωση των κοιλιών", "Την κολποκοιλιακή καθυστέρηση", "Την επαναπόλωση των κοιλιών", "Την έναρξη της συστολής"], correct: 2, reason: "Αντιπροσωπεύει τη φάση χαλάρωσης (ηλεκτρικά) των κοιλιών." },
            { q: "Η λειτουργία 'διπλής αντλίας' διασφαλίζει ότι:", options: ["Η αριστερή κοιλία αντλεί περισσότερο αίμα", "Και τα δύο τμήματα αντλούν την ίδια ποσότητα αίματος", "Το αίμα ρέει μόνο προς τους πνεύμονες", "Οι κόλποι συσπώνται πριν τις κοιλίες"], correct: 1, reason: "Για να υπάρχει ισορροπία, ο όγκος παλμού πρέπει να είναι ίδιος και στις δύο κυκλοφορίες." },
            { q: "Ποιο διάστημα στο ΗΚΓ αντιστοιχεί στην κολποκοιλιακή καθυστέρηση;", options: ["Διάστημα PR", "Διάστημα ST", "Κύμα T", "Σύμπλεγμα QRS"], correct: 0, reason: "Το PR περιλαμβάνει το χρόνο μετάδοσης από τον φλεβόκομβο στις κοιλίες." },
            { q: "Κατά την ισοογκομετρική συστολή:", options: ["Οι βαλβίδες είναι ανοιχτές", "Ο όγκος αίματος μειώνεται", "Η πίεση αυξάνεται με σταθερό όγκο", "Το αίμα ρέει στην αορτή"], correct: 2, reason: "Όλες οι βαλβίδες είναι κλειστές, η πίεση ανεβαίνει αλλά ο όγκος δεν αλλάζει." },
            { q: "Ποιο γεγονός προκαλεί την παραγωγή του 1ου καρδιακού ήχου (S1);", options: ["Η σύγκλειση των μηνοειδών βαλβίδων.", "Η σύγκλειση των κολποκοιλιακών (A-V) βαλβίδων.", "Η διάνοιξη της αορτικής βαλβίδας.", "Η συστολή των κόλπων."], correct: 1, reason: "Ο ήχος 'Lub' παράγεται από τη σύγκλειση της μιτροειδούς και της τριγλώχινας." },
            { q: "Ποιο από τα παρακάτω φυσήματα χαρακτηρίζεται ως διαστολικό;", options: ["Στένωση αορτικής βαλβίδας.", "Ανεπάρκεια μιτροειδούς βαλβίδας.", "Στένωση μιτροειδούς βαλβίδας.", "Στένωση πνευμονικής βαλβίδας."], correct: 2, reason: "Στη στένωση της μιτροειδούς, ο ήχος παράγεται όταν το αίμα περνά στην κοιλία κατά τη διαστολή." },
            { q: "Ποιο είναι το χαρακτηριστικό του 4ου καρδιακού ήχου (S4);", options: ["Είναι πάντα φυσιολογικός σε αθλητές.", "Ονομάζεται πρωτοδιαστολικός καλπασμός.", "Θεωρείται πάντα παθολογικός.", "Παράγεται από τη σύγκλειση της αορτής."], correct: 2, reason: "Υποδηλώνει έντονη κολπική συστολή έναντι σκληρής κοιλίας και είναι παθολογικός." },
            { q: "Τι είναι ο 'Ροίζος' (Thrill) και πού εντοπίζεται;", options: ["Φύσημα που ακούγεται μόνο με στηθοσκόπιο.", "Ηχητικές δονήσεις αισθητές με την παλάμη.", "Ήχος από τη συστολή των πνευμόνων.", "Η αλλαγή του PO2 στο αίμα."], correct: 1, reason: "Είναι η ψηλαφητή έκφραση ενός πολύ δυνατού φυσήματος." },
            { q: "Πώς ονομάζεται το φύσημα του ανοικτού αρτηριακού πόρου;", options: ["Συστολικό φύσημα πίδακα.", "Πρωτοδιαστολικός καλπασμός.", "Φύσημα μηχανής.", "Ροίζος τραχήλου."], correct: 2, reason: "Ονομάζεται έτσι λόγω της συνεχούς ροής αίματος (συστολή-διαστολή)." },
            { q: "Πότε επέρχεται η πλήρης ΑΝΑΤΟΜΙΚΗ σύγκλειση του αρτηριακού πόρου;", options: ["1-8 ημέρες μετά τη γέννηση.", "Αμέσως μετά την πρώτη αναπνοή.", "1-4 μήνες μετά τη γέννηση.", "Στο τέλος του πρώτου έτους."], correct: 2, reason: "Η ανατομική σύγκλειση απαιτεί την ανάπτυξη ινώδους ιστού, που παίρνει μήνες." },
            { q: "Πώς συγκρίνεται ο 2ος καρδιακός ήχος (S2) με τον 1ο (S1);", options: ["Είναι βαθύτερος και μακρύτερος.", "Είναι οξύτερος και βραχύτερος.", "Έχει την ίδια συχνότητα και διάρκεια.", "Είναι πιο αδύναμος και διαρκεί περισσότερο."], correct: 1, reason: "Οι μηνοειδείς βαλβίδες είναι πιο 'τεντωμένες' και κλείνουν πιο απότομα." },
            { q: "Ποιος είναι ο παθοφυσιολογικός μηχανισμός του Ρευματικού Πυρετού;", options: ["Άμεση εισβολή στρεπτόκοκκων στον καρδιακό μυ.", "Εκφύλιση των βαλβίδων λόγω γήρανσης.", "Αυτοάνοση αντίδραση αντισωμάτων με τους ιστούς του σώματος.", "Συγγενής ανωμαλία των γλωχίνων."], correct: 2, reason: "Πρόκειται για μοριακό μιμητισμό όπου το σώμα επιτίθεται στις δικές του βαλβίδες." },
            { q: "Ποια είναι η σωστή θέση ακρόασης της Αορτικής βαλβίδας;", options: ["Στο 2ο μεσοπλεύριο διάστημα αριστερά.", "Στο 5ο μεσοπλεύριο διάστημα στην κορυφή.", "Στο 2ο μεσοπλεύριο διάστημα δεξιά.", "Στο κάτω άκρο του στέρνου."], correct: 2, reason: "Το αίμα μεταφέρει τον ήχο της αορτικής βαλβίδας προς τα δεξιά του στέρνου." },
            { q: "Ποια δομή των εμβόλιμων δίσκων είναι άμεσα υπεύθυνη για τη λειτουργία της καρδιάς ως «συγκύτιο»;", options: ["Δεσμοσωμάτια", "Χασματοσυνδέσεις (Gap junctions)", "Σαρκείλημα", "Τ-σωληνάρια"], correct: 1, reason: "Οι χασματοσυνδέσεις επιτρέπουν τη γρήγορη δίοδο ιόντων από κύτταρο σε κύτταρο." },
            { q: "Ποια είναι η φυσιολογική σημασία της καθυστέρησης της διέγερσης στον κολποκοιλιακό κόμβο (AV node);", options: ["Να αυξηθεί η ένταση της κοιλιακής συστολής", "Να προλάβουν οι κόλποι να εκπολωθούν πλήρως", "Να δοθεί χρόνος στις κοιλίες να γεμίσουν με αίμα", "Να μειωθεί η κατανάλωση ενέργειας"], correct: 2, reason: "Η καθυστέρηση επιτρέπει την ολοκλήρωση της κολπικής συστολής και την πλήρωση των κοιλιών." },
            { q: "Ποιο τμήμα του ερεθισματαγωγού συστήματος παρουσιάζει την υψηλότερη ταχύτητα αγωγής;", options: ["Φλεβόκομβος", "Κολποκοιλιακός κόμβος", "Ίνες Purkinje", "Δεμάτιο του His"], correct: 2, reason: "Οι ίνες Purkinje άγουν το ερέθισμα με ταχύτητα 1,5 - 4 m/sec." },
            { q: "Τι προκαλεί την αυτόματη σταδιακή εκπόλωση στα κύτταρα του φλεβοκόμβου;", options: ["Η έξοδος ιόντων καλίου", "Η είσοδος νατρίου μέσω των «παράδοξων» διαύλων If", "Η ταχεία είσοδος ασβεστίου", "Η αντλία νατρίου-καλίου"], correct: 1, reason: "Οι δίαυλοι If επιτρέπουν την είσοδο Na+ κατά την υπερπόλωση." },
            { q: "Στα συσταλτά κύτταρα, η φάση του επιπέδου (plateau) οφείλεται κυρίως σε:", options: ["Ταχεία είσοδο Na+", "Βραδεία είσοδο Ca2+ μέσω διαύλων τύπου L", "Ταχεία έξοδο K+", "Κλείσιμο όλων των διαύλων"], correct: 1, reason: "Η ισορροπία μεταξύ εισόδου ασβεστίου και εξόδου καλίου διατηρεί το δυναμικό σταθερό." },
            { q: "Ποια είναι η λειτουργική σημασία της μεγάλης ανερέθιστης περιόδου του μυοκαρδίου;", options: ["Επιτρέπει στην καρδιά να χτυπά πιο γρήγορα", "Προλαμβάνει την εμφάνιση τετανίας (συνεχούς συστολής)", "Βοηθά στην ταχύτερη αγωγή", "Αυξάνει την ευαισθησία στο ασβέστιο"], correct: 1, reason: "Επειδή η ανερέθιστη περίοδος διαρκεί σχεδόν όσο και η συστολή, ο μυς προλαβαίνει να χαλαρώσει." },
            { q: "Τι ονομάζουμε «Επαγόμενη από Ασβέστιο Απελευθέρωση Ασβεστίου» (CICR);", options: ["Απελευθέρωση από τα μιτοχόνδρια", "Είσοδος Ca2+ που πυροδοτεί απελευθέρωση από το σαρκοπλασματικό δίκτυο", "Η έξοδος Ca2+ από το κύτταρο", "Η σύνδεση του ασβεστίου με την τροπονίνη"], correct: 1, reason: "Το ασβέστιο που εισέρχεται μέσω των διαύλων τύπου L δρα ως έναυσμα για τους διαύλους ρυανοδίνης." },
            { q: "Ποιος είναι ο ρόλος της τροπονίνης στη σύζευξη διέγερσης-συστολής;", options: ["Λειτουργεί ως δίαυλος ασβεστίου", "Διασπά το ATP", "Συνδέεται με το Ca2+ και μετακινεί την τροπομυοσίνη", "Αποθηκεύει ασβέστιο"], correct: 2, reason: "Η δέσμευση ασβεστίου στην τροπονίνη C αποκαλύπτει τις θέσεις σύνδεσης στην ακτίνη." },
            { q: "Ποια αντλία είναι υπεύθυνη για την επαναφορά του Ca2+ στο σαρκοπλασματικό δίκτυο;", options: ["Νατρίου-Καλίου (Na-K pump)", "SERCA", "Εναλλάκτης Na-Ca (NCX)", "Αντλία Πρωτονίων"], correct: 1, reason: "Η SERCA χρησιμοποιεί ATP για να «σκουπίσει» το ασβέστιο από το κυτταρόπλασμα." },
            { q: "Αν ο φλεβόκομβος σταματήσει, ποιος είναι ο πιθανός ρυθμός από τον AV node;", options: ["70 - 80 bpm", "40 - 60 bpm", "15 - 40 bpm", "100 - 120 bpm"], correct: 1, reason: "Ο AV κόμβος έχει ενδογενή ρυθμό διέγερσης 40-60 bpm." },
            { q: "Ποιος είναι ο γενικός ορισμός της καρδιακής αρρυθμίας;", options: ["Κάθε απόκλιση από τον φυσιολογικό φλεβοκομβικό ρυθμό.", "Η σταθερή αύξηση της αρτηριακής πίεσης.", "Η φυσιολογική σύσπαση των κόλπων.", "Η επιτάχυνση του ρυθμού μόνο κατά την άσκηση."], correct: 0, reason: "Οποιαδήποτε απόκλιση από τον ρυθμό του SA κόμβου θεωρείται αρρυθμία." },
            { q: "Ποιο είναι το κύριο εύρημα στο ΗΚΓ σε έναν Κολποκοιλιακό Αποκλεισμό 1ου βαθμού;", options: ["Διάστημα PR μικρότερο από 0.12s.", "Απουσία του επάρματος P.", "Παράταση του διαστήματος PR πάνω από 0.20s.", "Πλήρης αποσύνδεση κόλπων και κοιλιών."], correct: 2, reason: "Στον 1ο βαθμό όλα τα ερεθίσματα περνούν αλλά με καθυστέρηση (PR > 0.20s)." },
            { q: "Τι συμβαίνει στον Κολποκοιλιακό Αποκλεισμό 2ου βαθμού;", options: ["Όλες οι διεγέρσεις περνούν με καθυστέρηση.", "Περιοδική απώλεια συμπλεγμάτων QRS.", "Οι κοιλίες συστέλλονται ταχύτερα από τους κόλπους.", "Ο ρυθμός παραμένει απόλυτα σταθερός."], correct: 1, reason: "Ορισμένα ερεθίσματα δεν φτάνουν ποτέ στις κοιλίες." },
            { q: "Τι χαρακτηρίζει τον Κολποκοιλιακό Αποκλεισμό 3ου βαθμού (Πλήρης);", options: ["Οι κόλποι και οι κοιλίες λειτουργούν εντελώς ανεξάρτητα.", "Το διάστημα PR είναι σταθερά 0.25s.", "Η καρδιά σταματά να συστέλλεται μόνιμα.", "Ο φλεβόκομβος επιταχύνει τον ρυθμό του."], correct: 0, reason: "Υπάρχει πλήρης διακοπή της επικοινωνίας κόλπων-κοιλιών." },
            { q: "Τι είναι το Σύνδρομο Adams-Stokes;", options: ["Υπερβολική εφίδρωση λόγω άγχους.", "Ταχυκαρδία που προκαλείται από καφεΐνη.", "Ζάλη ή λιποθυμία λόγω παύσης της κοιλιακής άντλησης.", "Αλλεργική αντίδραση σε καρδιολογικά φάρμακα."], correct: 2, reason: "Συμβαίνει όταν ο εγκέφαλος δεν αιματώνεται λόγω παύσης του καρδιακού παλμού." },
            { q: "Ποιες συνθήκες ευνοούν το Φαινόμενο της Επανεισόδου (Reentry);", options: ["Μικρή καρδιά και γρήγορη αγωγή.", "Διάταση καρδιάς, ισχαιμία και επίδραση επινεφρίνης.", "Χαμηλή πίεση και υψηλό οξυγόνο.", "Φυσιολογική ανατομία και ηρεμία."], correct: 1, reason: "Η μεγάλη διαδρομή και η βραδεία αγωγή επιτρέπουν στον ιστό να επαναδιεγερθεί." },
            { q: "Ποια είναι η διαφορά στο ΗΚΓ μεταξύ Κολπικής και Κοιλιακής Μαρμαρυγής;", options: ["Δεν υπάρχει καμία διαφορά.", "Στην κολπική τα QRS είναι χαοτικά.", "Στην κολπική τα QRS είναι φυσιολογικά (αλλά άρρυθμα), στην κοιλιακή είναι χαοτικά.", "Η κολπική έχει πάντα επάρματα P."], correct: 2, reason: "Στην κολπική το QRS παράγεται από τον AV, ενώ στην κοιλιακή το QRS είναι μη αναγνωρίσιμο." },
            { q: "Τι είναι ο 'διαλείπων σφυγμός' (pulse deficit);", options: ["Όταν ο σφυγμός δεν ψηλαφάται λόγω ανεπαρκούς πλήρωσης των κοιλιών.", "Η πλήρηση παύση του σφυγμού.", "Ο πολύ δυνατός σφυγμός.", "Η διαφορά πίεσης μεταξύ χεριών."], correct: 0, reason: "Συμβαίνει όταν η καρδιά συσπάται αλλά δεν προωθεί αρκετό αίμα για σφυγμό." },
            { q: "Ποιος είναι ο ρυθμός της 'Κοιλιακής Διαφυγής' από τις ίνες Purkinje;", options: ["60-100 bpm.", "15-40 bpm.", "100-150 bpm.", "Μηδενικός ρυθμός."], correct: 1, reason: "Είναι ο εγγενής ρυθμός των ινών Purkinje." },
            { q: "Ποια είναι η αναλογία συμπιέσεων/εμφυσήσεων στην ΚΑΡΠΑ ενηλίκων;", options: ["15 συμπιέσεις / 2 εμφυσήσεις.", "5 συμπιέσεις / 1 εμφύσηση.", "30 συμπιέσεις / 2 εμφυσήσεις.", "100 συμπιέσεις χωρίς εμφυσήσεις."], correct: 2, reason: "30:2 είναι το παγκόσμιο πρότυπο." },
            { q: "Σε ασθενή με Κολποκοιλιακό Αποκλεισμό 2ου βαθμού, η βλάβη εντοπίζεται στο σύστημα His-Purkinje. Ποιος τύπος είναι;", options: ["Αποκλεισμός Τύπου Ι (Wenckebach)", "Αποκλεισμός Τύπου ΙΙ", "Αποκλεισμός 1ου βαθμού", "Φλεβοκομβική βραδυκαρδία"], correct: 1, reason: "Ο Τύπος ΙΙ (Mobitz II) αφορά βλάβη χαμηλότερα από τον AV κόμβο." },
            { q: "Πώς η υπερκαλιαιμία συμβάλλει στο φαινόμενο της επανεισόδου (reentry);", options: ["Αυξάνει το μήκος της διαδρομής", "Βραχύνει την ανερέθιστη περίοδο", "Μειώνει την ταχύτητα αγωγής", "Ενισχύει τη δράση του φλεβόκομβου"], correct: 2, reason: "Η επιβράδυνση της αγωγής είναι βασικός παράγοντας για το reentry." },
            { q: "Η επινεφρίνη προκαλεί αρρυθμίες μέσω reentry κυρίως επειδή:", options: ["Προκαλεί ισχαιμία", "Βραχύνει την ανερέθιστη περίοδο", "Αυξάνει την ταχύτητα αγωγής", "Επιμηκύνει το διάστημα PR"], correct: 1, reason: "Η βράχυνση της ανερέθιστης περιόδου επιτρέπει πρόωρη επαναδιέγερση." },
            { q: "Τι χαρακτηρίζει τον ρυθμό της 'Κοιλιακής Διαφυγής' στον 3ο βαθμό αποκλεισμού;", options: ["60-100 bpm", "15-40 bpm", "200-300 bpm", "Πλήρης σιγή"], correct: 1, reason: "Οι ίνες Purkinje αναλαμβάνουν ως έσχατος βηματοδότης." },
            { q: "Στο ΗΚΓ της Κολπικής Μαρμαρυγής (Atrial Fib), παρατηρούμε:", options: ["Πριονωτά κύματα", "Παράταση PR", "Απουσία επαρμάτων P και ακανόνιστα RR", "Ευρέα QRS"], correct: 2, reason: "Η ακανόνιστη διέλευση των ερεθισμάτων στον AV δημιουργεί ακανόνιστο ρυθμό." },
            { q: "Το σύνδρομο Adams-Stokes προκαλείται από:", options: ["Άγχος", "Εγκεφαλική ισχαιμία λόγω παύσης της άντλησης", "Τοξικότητα καφεΐνης", "Υπερπλήρωση κόλπων"], correct: 1, reason: "Η καρδιά σταματά να στέλνει αίμα στον εγκέφαλο." },
            { q: "Ο 'διαλείπων σφυγμός' στις έκτακτες συστολές οφείλεται σε:", options: ["Αδυναμία φλεβόκομβου", "Ανεπαρκή πλήρωση των κοιλιών", "Αποκλεισμό στο His", "Διέγερση πνευμονογαστρικού"], correct: 1, reason: "Η κοιλία συστέλλεται πρόωρα χωρίς να έχει γεμίσει με αίμα." },
            { q: "Ποιος είναι ο κύριος στόχος της απινίδωσης;", options: ["Ενίσχυση πνευμονογαστρικού", "Καθολικός ηλεκτρικός μηδενισμός του μυοκαρδίου", "Αύξηση πίεσης", "Επιτάχυνση αγωγής"], correct: 1, reason: "Σκοπός είναι να σταματήσει κάθε χαοτική δραστηριότητα για να αναλάβει ο SA." },
            { q: "Στην Κοιλιακή Μαρμαρυγή, η άντληση αίματος είναι:", options: ["Αυξημένη", "Μειωμένη κατά 50%", "Μηδενική ή αμελητέα", "Φυσιολογική"], correct: 2, reason: "Η καρδιά απλώς 'τρέμει' χωρίς να προωθεί αίμα." },
            { q: "Ποιο είναι το ανατομικό υπόστρωμα που ευνοεί το reentry στη διατατική καρδιοπάθεια;", options: ["Μείωση μεγέθους κόλπων", "Μεγάλο μήκος διαδρομής ερεθίσματος", "Αύξηση πάχους βαλβίδων", "Απουσία Purkinje"], correct: 1, reason: "Η διάταση μεγαλώνει την απόσταση που πρέπει να διανύσει το ερέθισμα." },
            { q: "Τι ορίζεται ως διατοιχωματική πίεση;", options: ["Η πίεση στην αορτή", "Η διαφορά πίεσης μεταξύ εξωτερικής επιφάνειας αγγείου και αυλού", "Η πίεση στον δεξιό κόλπο", "Η αντίσταση των τριχοειδών"], correct: 1, reason: "Καθορίζει πόσο 'τεντωμένο' είναι το τοίχωμα του αγγείου." },
            { q: "Ποια είναι η σχέση διατασιμότητας φλεβών και αρτηριών;", options: ["Φλέβες < Αρτηρίες", "Αρτηρίες 8x Φλέβες", "Φλέβες 8x Αρτηρίες", "Είναι ίδιες"], correct: 2, reason: "Οι φλέβες είναι πολύ πιο εύκαμπτες και διατάσιμες." },
            { q: "Γιατί η ευενδοτότητα των συστημικών φλεβών είναι 24 φορές μεγαλύτερη;", options: ["8x διατασιμότητα και 3x όγκος", "Ελαστίνη", "Βαλβίδες", "24x διάμετρος"], correct: 0, reason: "Συνδυάζεται η ελαστικότητα με τη μεγάλη χωρητικότητα (8x3=24)." },
            { q: "Πού βρίσκεται το 64% του αίματος στη συστηματική κυκλοφορία;", options: ["Αρτηρίες", "Τριχοειδή", "Καρδιά", "Φλέβες"], correct: 3, reason: "Οι φλέβες αποτελούν τη δεξαμενή αίματος του σώματος." },
            { q: "Ποιο είναι το κύριο χαρακτηριστικό του τοιχώματος των φλεβών;", options: ["Πολλοί μύες", "Περισσότερο κολλαγόνο παρά ελαστίνη", "Παχύ τοίχωμα", "Απουσία ενδοθηλίου"], correct: 1, reason: "Αυτό τις κάνει λιγότερο ελαστικές αλλά πολύ διατάσιμες." },
            { q: "Τι αποτέλεσμα έχει η φλεβοσύσπαση μέσω του συμπαθητικού;", options: ["Αύξηση αντιστάσεων", "Μείωση επαναφοράς", "Μείωση χωρητικότητας και εκτροπή όγκου προς την καρδιά", "Σταμάτημα ροής"], correct: 2, reason: "Μειώνει τη χωρητικότητα της 'δεξαμενής' στέλνοντας αίμα στην κεντρική κυκλοφορία." },
            { q: "Ποιοι παράγοντες καθορίζουν τη φλεβική επαναφορά;", options: ["Μόνο RAP", "RAP, μέση συστηματική πίεση πλήρωσης και αντίσταση", "Αορτή", "Ταχύτητα αρτηριδίων"], correct: 1, reason: "Αυτή είναι η βασική αιμοδυναμική εξίσωση της επιστροφής αίματος." },
            { q: "Πότε μηδενίζεται η φλεβική επάνοδος;", options: ["Όταν RAP = 0", "Εισπνοή", "Όταν RAP = Μέση συστηματική πίεση πλήρωσης", "Άσκηση"], correct: 2, reason: "Δεν υπάρχει πλέον διαφορά πίεσης για να κινηθεί το αίμα." },
            { q: "Πώς επιδρά η αναπνευστική αντλία στη φλεβική επιστροφή;", options: ["Θετική πίεση", "Αρνητική ενδοθωρακική και αύξηση ενδοκοιλιακής πίεσης", "Εμποδίζει τη ροή", "Μειώνει την πίεση κάτω άκρων"], correct: 1, reason: "Λειτουργεί σαν αναρρόφηση προς τον θώρακα." },
            { q: "Τι εξασφαλίζει τη μονόδρομη ροή στην 'άμελξη' των φλεβών;", options: ["Ταχύτητα", "Αρνητική RAP", "Βαλβίδες και συστολή σκελετικών μυών", "Λείοι μύες"], correct: 2, reason: "Η μυϊκή αντλία σπρώχνει και οι βαλβίδες κρατούν το αίμα." },
            { q: "Τι ορίζεται ως Προφορτίο;", options: ["Δύναμη συστολής", "Το αρχικό μήκος των ινών πριν τη συστολή", "Αντίσταση αγγείων", "Υπόλειμμα αίματος"], correct: 1, reason: "Αντιστοιχεί στον τελοδιαστολικό όγκο." },
            { q: "Σύμφωνα με τον νόμο Frank-Starling, η παθολογική καρδιά (ΚΑ):", options: ["Βελτιώνεται", "Γραμμική αύξηση", "Περνά στο καθοδικό σκέλος όπου η διάταση μειώνει την απόδοση", "Σταθερή"], correct: 2, reason: "Η υπερδιάταση κουράζει το μυοκάρδιο αντί να το βοηθά." },
            { q: "Ποια είναι η καρδιακή εφεδρεία στη σοβαρή Καρδιακή Ανεπάρκεια;", options: ["200%", "600%", "0%", "300%"], correct: 2, reason: "Ο ασθενής δεν μπορεί να αυξήσει καθόλου την παροχή του." },
            { q: "Τι χαρακτηρίζει τη Διαστολική ΚΑ σε επίπεδο Κλάσματος Εξώθησης (ΚΕ);", options: ["ΚΕ < 40%", "Φυσιολογικό ή αυξημένο ΚΕ (> 50%)", "Μειωμένο ΚΕ", "Μηδενικό ΚΕ"], correct: 1, reason: "Η καρδιά συσπάται καλά, αλλά δεν γεμίζει σωστά." },
            { q: "Ποια είναι η διαφορά μεταξύ Κλάσης III και IV (NYHA);", options: ["III στην ηρεμία", "IV μόνο σε κόπωση", "IV συμπτώματα στην ηρεμία, III στην ήπια δραστηριότητα", "Καμία"], correct: 2, reason: "Η Κλάση IV είναι η πιο σοβαρή μορφή." },
            { q: "Πώς επηρεάζει το RAAS το Μεταφορτίο στην ΚΑ;", options: ["Μειώνει", "Αυξάνει μέσω αγγειοσύσπασης (Αγγειοτενσίνη II)", "Δεν επηρεάζει", "Αυξάνει ΚΛΟΑ"], correct: 1, reason: "Η αγγειοσύσπαση δυσκολεύει την καρδιά να βγάλει αίμα." },
            { q: "Ποιος είναι ο μηχανισμός των Β-Αποκλειστών στη χρόνια ΚΑ;", options: ["Αύξηση συσταλτικότητας", "Προστασία από τοξική επίδραση κατεχολαμινών/Συμπαθητικού", "Αύξηση ΚΣ", "Κατακράτηση νατρίου"], correct: 1, reason: "Μειώνουν το 'στρες' της καρδιάς μακροπρόθεσμα." },
            { q: "Τι ορίζεται ως Ενδοτικότητα (Compliance);", options: ["Μεταβολή πίεσης", "Μεταβολή όγκου ανά μεταβολή πίεσης (ΔV/ΔP)", "Κλείσιμο βαλβίδων", "Ρυθμός αδειάσματος"], correct: 1, reason: "Δείχνει πόσο εύκολα διατείνεται η καρδιά." },
            { q: "Ποια είναι η συνέπεια της 'backward' επίδρασης στην ΚΑ αριστερής κοιλίας;", options: ["Οίδημα ποδιών", "Αύξηση ΚΛΟΑ", "Πνευμονική συμφόρηση/οίδημα", "Μείωση πίεσης"], correct: 2, reason: "Το αίμα λιμνάζει πίσω στους πνεύμονες." },
            { q: "Η Δακτυλίτιδα (Digitalis) δρα ως:", options: ["Διουρητικό", "Θετική ινότροπη δράση (αυξάνει Ca2+)", "Β-blocker", "Αγγειοδιασταλτικό"], correct: 1, reason: "Ενισχύει τη δύναμη της συστολής." },
            { q: "Τι προκαλεί το αντανακλαστικό τασεοϋποδοχέων στην οξεία ΚΑ;", options: ["Μείωση ΚΣ", "Αναστολή ΣΝΣ", "Διέγερση ΣΝΣ για αύξηση συσταλτικότητας και ΚΣ", "Πτώση αντιστάσεων"], correct: 2, reason: "Το σώμα προσπαθεί απεγνωσμένα να ανεβάσει την πίεση." },
            { q: "Το αποτέλεσμα της ΚΑ δεξιάς κοιλίας είναι:", options: ["Πνευμονικό οίδημα", "Φλεβική συμφόρηση και οιδήματα ιστών", "Αύξηση αιμάτωσης πνευμόνων", "Πλήρωση αριστερής"], correct: 1, reason: "Το αίμα λιμνάζει στο σώμα." },
            { q: "Διαφορά Αντιρροπούμενης και Μη Αντιρροπούμενης ΚΑ:", options: ["Τελοδιαστολικός όγκος", "Στην αντιρροπούμενη η παροχή διατηρείται μέσω μηχανισμών", "Δεν υπάρχει διαφορά", "Μόνο διαστολική"], correct: 1, reason: "Στη μη αντιρροπούμενη οι μηχανισμοί καταρρέουν." },
            { q: "Ο ρόλος των Διουρητικών στην ΚΑ:", options: ["Αύξηση συσταλτικότητας", "Μείωση Προφορτίου και όγκου πλάσματος", "Αναστολή Αγγειοτενσίνης", "Αύξηση ΚΣ"], correct: 1, reason: "Απομακρύνουν το περιττό υγρό από την κυκλοφορία." },
            { q: "Στάδιο C κατά ACC/AHA:", options: ["Υψηλός κίνδυνος", "Δομική βλάβη χωρίς συμπτώματα", "Συμπτωματική ΚΑ με δομική ανωμαλία", "Ανθεκτική ΚΑ"], correct: 2, reason: "Είναι ο ασθενής που έχει και τη νόσο και τα συμπτώματα." },
            { q: "Πώς μεταβάλλεται η ταχύτητα ροής στα τριχοειδή;", options: ["Αυξάνεται", "Μειώνεται (~0,3 mm/sec)", "Σταθερή", "Μηδενίζεται"], correct: 1, reason: "Λόγω της τεράστιας συνολικής διατομής του δικτύου." },
            { q: "Αποτέλεσμα δυνάμεων Starling στο αρτηριακό άκρο:", options: ["Επαναρρόφηση", "Υπερδιήθηση (καθαρή πίεση 10 mmHg)", "Ισορροπία", "35 mmHg"], correct: 1, reason: "Εκεί το υγρό βγαίνει από το αγγείο." },
            { q: "Μεταφορά λευκωματίνης μέσω ενδοθηλίου:", options: ["Διάχυση", "Υδατικοί πόροι", "Πινοκύτωση (κυστίδια)", "Αντλίες"], correct: 2, reason: "Οι μεγάλες πρωτεΐνες δεν χωρούν στους πόρους." },
            { q: "Όταν ο ιστός έχει χαμηλό O2, οι σφιγκτήρες:", options: ["Συσπώνται", "Χαλαρώνουν", "Κλείνουν", "Καταστρέφονται"], correct: 1, reason: "Για να περάσει περισσότερο αίμα στον ιστό." },
            { q: "Η ηπατική ανεπάρκεια προκαλεί οίδημα λόγω:", options: ["Φλεβικής πίεσης", "Μειωμένης σύνθεσης αλβουμίνης", "Διαπερατότητας", "Νατρίου"], correct: 1, reason: "Πέφτει η κολλοειδωσμωτική πίεση." },
            { q: "Ο ρόλος των μεταρτηριδίων:", options: ["Ανταλλαγή", "Shunts προς το φλεβίδιο", "Σταμάτημα ροής", "Υδροστατική"], correct: 1, reason: "Παρακάμπτουν το τριχοειδές δίκτυο αν χρειαστεί." },
            { q: "Η ισταμίνη προκαλεί:", options: ["Αγγειοσυστολή", "Αύξηση διαπερατότητας", "Μείωση επιφάνειας", "Σταθεροποίηση"], correct: 1, reason: "Ανοίγει τους πόρους των τριχοειδών." },
            { q: "Σημείο Μετάπτωσης τριχοειδούς:", options: ["Αλλαγή χρώματος", "Εκεί που η καθαρή πίεση είναι μηδέν", "Συμβολή", "Μέγιστη ταχύτητα"], correct: 1, reason: "Είναι το όριο μεταξύ διήθησης και επαναρρόφησης." },
            { q: "Ακριβής κατανομή κυττάρων στον λεμφαδένα:", options: ["Β στον φλοιό, Τ στον μυελό", "Τ στον εν τω βάθει φλοιό, Β/Πλασματοκύτταρα στις μυελώδεις δοκίδες", "Μόνο μακροφάγα", "Ομοιόμορφα"], correct: 1, reason: "Υπάρχει συγκεκριμένη οργάνωση για την ανοσολογική απόκριση." },
            { q: "Μηχανισμός ροής λέμφου στα λεμφαγγεία:", options: ["Οσμωτική", "Μυογενής μηχανισμός (σύσπαση τοιχώματος)", "Αρτηριακή", "Βαρύτητα"], correct: 1, reason: "Τα λεμφαγγεία έχουν δική τους ρυθμική συστολή." },
            { q: "Αρνητική πίεση πνευμόνων για αποφυγή οιδήματος:", options: ["Επιφανειακή τάση (-8 mmHg)", "17.3 mmHg", "Εξάτμιση", "28 mmHg"], correct: 0, reason: "Βοηθά να κρατιούνται οι κυψελίδες στεγνές." },
            { q: "Συνολικός παράγοντας προστασίας (17 mmHg) από οίδημα:", options: ["10 λέμφος / 7 πρωτεΐνες", "3 (συμμόρφωση), 7 (ροή), 7 (ξέπλυμα πρωτεϊνών)", "17 RAP", "5 βαλβίδες / 12 μύες"], correct: 1, reason: "Είναι το άθροισμα των φυσιολογικών αμυνών του σώματος." },
            { q: "Σχέση πίεσης-όγκου διαμέσου υγρού όταν P > 0:", options: ["Χαμηλή συμμόρφωση", "Σταθερός όγκος", "Υψηλή συμμόρφωση (ραγδαία αύξηση όγκου)", "Σταμάτημα λέμφου"], correct: 2, reason: "Εκεί ξεκινά το κλινικά ορατό οίδημα." },
            { q: "Νημάτια αγκύρωσης λεμφικών τριχοειδών:", options: ["Μυϊκές ίνες", "Anchoring filaments από κολλαγόνο", "Αναστομώσεις", "Αιμοπετάλια"], correct: 1, reason: "Κρατούν τα λεμφαγγεία ανοιχτά όταν ο ιστός πρήζεται." }
        ];

        let state = {
            currentQ: 0,
            answers: Array(quizData.length).fill(null),
            results: Array(quizData.length).fill(null),
            score: 0
        };

        function toggleDarkMode() {
            const isDark = document.documentElement.classList.toggle('dark');
            document.getElementById('sun-icon').classList.toggle('hidden', !isDark);
            document.getElementById('moon-icon').classList.toggle('hidden', isDark);
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
        }

        function toggleModal(show) {
            document.getElementById('nav-modal').classList.toggle('hidden', !show);
        }

        function initNav() {
            const navGrid = document.getElementById('nav-grid');
            navGrid.innerHTML = '';
            quizData.forEach((_, i) => {
                const btn = document.createElement('button');
                btn.className = `nav-btn h-10 w-full rounded-lg font-bold text-xs bg-slate-100 dark:bg-slate-800 text-slate-400`;
                btn.innerText = i + 1;
                btn.id = `nav-${i}`;
                btn.onclick = () => { jumpToQuestion(i); toggleModal(false); };
                navGrid.appendChild(btn);
            });
            document.getElementById('total-num').innerText = quizData.length;
            updateNavUI();
        }

        function updateNavUI() {
            quizData.forEach((_, i) => {
                const btn = document.getElementById(`nav-${i}`);
                if (!btn) return;
                btn.className = "nav-btn h-10 w-full rounded-lg font-bold text-xs ";
                if (state.currentQ === i) btn.classList.add('active');
                else if (state.results[i] === true) btn.classList.add('correct');
                else if (state.results[i] === false) btn.classList.add('wrong');
                else btn.classList.add('bg-slate-100', 'dark:bg-slate-800', 'text-slate-400');
            });

            const answered = state.results.filter(r => r !== null).length;
            const pct = (answered / quizData.length) * 100;
            document.getElementById('inner-progress').style.width = `${pct}%`;
            document.getElementById('score-badge').innerText = `Σκορ: ${state.score}`;
        }

        function renderQuestion() {
            const data = quizData[state.currentQ];
            document.getElementById('current-num').innerText = state.currentQ + 1;
            document.getElementById('question-text').innerText = data.q;
            const optionsList = document.getElementById('options-list');
            const feedbackBox = document.getElementById('feedback-box');
            const nextBtn = document.getElementById('next-btn');
            
            optionsList.innerHTML = '';
            feedbackBox.classList.add('hidden');
            nextBtn.classList.add('hidden');

            data.options.forEach((opt, i) => {
                const btn = document.createElement('button');
                btn.className = "option-btn w-full text-left p-4 rounded-xl border border-slate-200 dark:border-slate-700 text-sm font-medium bg-white dark:bg-slate-800 shadow-sm flex items-center gap-3";
                btn.innerHTML = `<div class="w-6 h-6 rounded-full border border-slate-200 dark:border-slate-600 flex-shrink-0 flex items-center justify-center text-[10px] font-bold">${i+1}</div> <span>${opt}</span>`;
                
                if (state.results[state.currentQ] !== null) {
                    btn.disabled = true;
                    if (i === data.correct) btn.classList.add('correct-opt');
                    if (i === state.answers[state.currentQ] && i !== data.correct) btn.classList.add('wrong-opt');
                } else {
                    btn.onclick = () => checkAnswer(i);
                }
                optionsList.appendChild(btn);
            });

            if (state.results[state.currentQ] !== null) {
                showFeedback(state.results[state.currentQ]);
                nextBtn.classList.remove('hidden');
            }
        }

        function checkAnswer(idx) {
            if (state.results[state.currentQ] !== null) return;
            const isCorrect = (idx === quizData[state.currentQ].correct);
            state.answers[state.currentQ] = idx;
            state.results[state.currentQ] = isCorrect;
            if (isCorrect) state.score++;
            updateNavUI();
            renderQuestion();
        }

        function showFeedback(isCorrect) {
            const feedbackBox = document.getElementById('feedback-box');
            const data = quizData[state.currentQ];
            feedbackBox.classList.remove('hidden');

            const icon = document.getElementById('feedback-icon');
            const title = document.getElementById('feedback-title');
            const msg = document.getElementById('feedback-msg');

            if (isCorrect) {
                feedbackBox.className = "mt-6 p-4 rounded-xl bg-green-50 dark:bg-green-900/20 border border-green-100 dark:border-green-800 text-green-800 dark:text-green-200";
                icon.className = "flex-shrink-0 w-8 h-8 rounded-full bg-green-500 text-white flex items-center justify-center";
                icon.innerHTML = "✓";
                title.innerText = "Σωστή Απάντηση";
            } else {
                feedbackBox.className = "mt-6 p-4 rounded-xl bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-800 text-red-800 dark:text-red-200";
                icon.className = "flex-shrink-0 w-8 h-8 rounded-full bg-red-500 text-white flex items-center justify-center";
                icon.innerHTML = "✕";
                title.innerText = "Λάθος Απάντηση";
            }
            msg.innerText = data.reason || "Η επεξήγηση δεν είναι διαθέσιμη.";
            
            const nextBtn = document.getElementById('next-btn');
            nextBtn.innerText = (state.currentQ < quizData.length - 1) ? "Επόμενη Ερώτηση" : "Δείτε τα Αποτελέσματα";
        }

        function goToNext() {
            if (state.currentQ < quizData.length - 1) {
                state.currentQ++;
                renderQuestion();
                updateNavUI();
            } else {
                showFinalScreen();
            }
        }

        function jumpToQuestion(i) {
            state.currentQ = i;
            renderQuestion();
            updateNavUI();
        }

        function showFinalScreen() {
            document.getElementById('question-content').classList.add('hidden');
            document.getElementById('next-btn').classList.add('hidden');
            const screen = document.getElementById('result-screen');
            screen.classList.remove('hidden');
            screen.classList.add('flex');
            document.getElementById('final-score').innerText = state.score;
            document.getElementById('final-total').innerText = quizData.length;
            document.getElementById('final-pct').innerText = Math.round((state.score / quizData.length) * 100);
        }

        function restartQuiz() {
            state = { currentQ: 0, answers: Array(quizData.length).fill(null), results: Array(quizData.length).fill(null), score: 0 };
            document.getElementById('question-content').classList.remove('hidden');
            document.getElementById('result-screen').classList.add('hidden');
            initNav();
            renderQuestion();
        }

        // Initialize Theme
        if (localStorage.getItem('theme') === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark');
            document.getElementById('sun-icon').classList.remove('hidden');
            document.getElementById('moon-icon').classList.add('hidden');
        }

        // Init
        initNav();
        renderQuestion();
    </script>
</body>
</html>
